# Work Packages: ÎèÖÌõÑÍ∞ê Î©îÏù∏ ÌîºÎìú

**Inputs**: Design documents from `/kitty-specs/002-feature/`
**Prerequisites**: plan.md (required), spec.md (user stories), research.md, data-model.md, contracts/, quickstart.md

**Tests**: Only include explicit testing work when stakeholders request it.

**Organization**: Fine-grained subtasks (`Txxx`) roll up into work packages (`WPxx`). Each work package must be independently deliverable and testable.

**Prompt Files**: Each work package references a matching prompt file in `kitty-specs/002-feature/tasks/planned/` generated by `/spec-kitty.tasks`. Treat this file as the high-level checklist; keep deep implementation detail inside the prompt files.

## Subtask Format: `[Txxx] [P?] Description`

- **[P]** indicates the subtask can proceed in parallel (different files/components).
- Include precise file paths or modules.

## Path Conventions

- **Backend**: `packages/backend/src/`
- **Frontend**: `packages/frontend/src/`
- Adjust paths to match the implementation plan.

---

## Work Package WP01: Database Schema & Infrastructure (Priority: P0) ‚úÖ

**Goal**: Establish database foundation with Book, Review, Like, Bookmark entities and migrations.
**Independent Test**: Migrations apply cleanly; Prisma Client regenerates with new models; seed data loads successfully.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP01-database-schema-infrastructure.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=89716)

### Included Subtasks

- [x] T001 Update `packages/backend/prisma/schema.prisma` with Book, Review, Like, Bookmark models per data-model.md
- [x] T002 Add ExternalSource, ReadStatus, ReviewStatus enums to schema
- [x] T003 Update existing User model with reviews, likes, bookmarks relations
- [x] T004 Generate migration: `pnpm prisma migrate dev --name add-review-feed-entities`
- [x] T005 Regenerate Prisma Client: `pnpm prisma generate`
- [x] T006 Update `packages/backend/prisma/seed.ts` with sample books and reviews
- [x] T007 Verify migrations apply cleanly on fresh database

### Implementation Notes

1. Copy Prisma schema from data-model.md
2. Ensure all indexes are defined (performance-critical for feed queries)
3. Validate unique constraints (userId+reviewId for likes/bookmarks)
4. Test migration rollback capability

### Parallel Opportunities

- None (sequential database setup required)

### Dependencies

- None (foundational work)

### Risks & Mitigations

- **Risk**: Migration conflicts with existing schema
- **Mitigation**: Run migrations on clean test database first, backup production data
- **Risk**: Index performance issues
- **Mitigation**: Validate index usage with EXPLAIN ANALYZE on sample queries

---

## Work Package WP02: Backend - Reviews Module (Priority: P0) ‚úÖ

**Goal**: Implement Reviews API with feed endpoint, CRUD operations, and pagination.
**Independent Test**: GET /api/reviews/feed returns paginated reviews; POST /api/reviews creates new review; PATCH/DELETE work for author.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP02-backend-reviews-module.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=51400)

### Included Subtasks

- [x] T008 [P] Create `packages/backend/src/modules/reviews/reviews.module.ts`
- [x] T009 [P] Create `packages/backend/src/modules/reviews/controllers/reviews.controller.ts`
- [x] T010 [P] Create `packages/backend/src/modules/reviews/services/reviews.service.ts`
- [x] T011 [P] Create `packages/backend/src/modules/reviews/dto/create-review.dto.ts` with class-validator
- [x] T012 [P] Create `packages/backend/src/modules/reviews/dto/update-review.dto.ts` with class-validator
- [x] T013 [P] Create `packages/backend/src/modules/reviews/dto/review-response.dto.ts`
- [x] T014 Implement GET /api/reviews/feed with pagination (page, limit)
- [x] T015 Implement GET /api/reviews/:id with viewCount increment
- [x] T016 Implement POST /api/reviews with authentication guard
- [x] T017 Implement PATCH /api/reviews/:id with author authorization
- [x] T018 Implement DELETE /api/reviews/:id with soft delete (status=DELETED)
- [x] T019 Redis caching for anonymous feed requests (TTL: 60s)
- [x] T020 Add Reviews module to app.module.ts imports

### Implementation Notes

1. Feed query must include user and book relations (N+1 prevention)
2. Apply `status=PUBLISHED, deletedAt=null` filter to all public queries
3. Content truncation for feed (150 chars) vs full content for detail
4. For authenticated users, join likes/bookmarks to populate isLikedByMe, isBookmarkedByMe
5. Use Prisma transactions for likeCount updates

### Parallel Opportunities

- DTOs (T011-T013) can be created in parallel
- Controller and service can start in parallel after module scaffolding

### Dependencies

- Depends on WP01 (database schema)

### Risks & Mitigations

- **Risk**: N+1 query problem
- **Mitigation**: Use Prisma `include` for user/book, validate with query logging
- **Risk**: Performance degradation with large datasets
- **Mitigation**: Index on (status, publishedAt DESC), limit page size to max 50

---

## Work Package WP03: Backend - Books Module (Priority: P0) ‚úÖ

**Goal**: Implement Books API with external API search, internal DB caching, and book info retrieval.
**Independent Test**: GET /api/books/search returns results from external APIs; POST /api/books caches book; GET /api/books/:id returns cached book.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP03-backend-books-module.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=21049)

### Included Subtasks

- [x] T021 [P] Create `packages/backend/src/books/books.module.ts`
- [x] T022 [P] Create `packages/backend/src/books/books.controller.ts`
- [x] T023 [P] Create `packages/backend/src/books/books.service.ts`
- [x] T024 [P] Create `packages/backend/src/books/external/book-api.service.ts`
- [x] T025 [P] Create `packages/backend/src/books/dto/search-book.dto.ts`
- [x] T026 [P] Create `packages/backend/src/books/dto/create-book.dto.ts`
- [x] T027 Implement Google Books API integration in book-api.service.ts
- [x] T028 Implement Aladin API integration in book-api.service.ts
- [x] T029 Implement GET /api/books/search with parallel API calls and deduplication
- [x] T030 Implement POST /api/books with ISBN/title+author deduplication
- [x] T031 Implement GET /api/books/:id with reviewCount aggregation
- [x] T032 Implement GET /api/books/:id/reviews for book-specific feed
- [x] T033 Add Books module to app.module.ts imports
- [x] T034 Configure environment variables (GOOGLE_BOOKS_API_KEY, ALADIN_API_KEY)

### Implementation Notes

1. Search endpoint caches results in Redis (TTL: 5 min)
2. Use Promise.allSettled for parallel Google Books + Aladin search
3. Deduplication logic: ISBN match first, then title+author fuzzy match
4. External API timeout: 10 seconds
5. Fallback: If one API fails, return results from the other

### Parallel Opportunities

- DTOs (T025-T026) and API service (T024) can proceed in parallel
- Google Books (T027) and Aladin (T028) integrations can be done in parallel

### Dependencies

- Depends on WP01 (database schema)

### Risks & Mitigations

- **Risk**: External API rate limits or downtime
- **Mitigation**: Implement caching, fallback to manual entry (externalSource=MANUAL)
- **Risk**: Duplicate book records
- **Mitigation**: Enforce unique constraints on ISBN and (externalSource, externalId)

---

## Work Package WP04: Backend - Likes & Bookmarks Modules (Priority: P0) ‚úÖ

**Goal**: Implement Likes and Bookmarks toggle APIs with transaction-safe likeCount/bookmarkCount updates.
**Independent Test**: POST /api/reviews/:id/like toggles like state and updates count; POST /api/reviews/:id/bookmark toggles bookmark.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP04-backend-likes-bookmarks-modules.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=2348)

### Included Subtasks

- [x] T035 [P] Create `packages/backend/src/likes/likes.module.ts`
- [x] T036 [P] Create `packages/backend/src/likes/likes.controller.ts`
- [x] T037 [P] Create `packages/backend/src/likes/likes.service.ts`
- [x] T038 [P] Create `packages/backend/src/bookmarks/bookmarks.module.ts`
- [x] T039 [P] Create `packages/backend/src/bookmarks/bookmarks.controller.ts`
- [x] T040 [P] Create `packages/backend/src/bookmarks/bookmarks.service.ts`
- [x] T041 Implement POST /api/reviews/:id/like toggle with Prisma transaction
- [x] T042 Implement GET /api/reviews/:id/likes for like list
- [x] T043 Implement GET /users/me/likes for user's liked reviews
- [x] T044 Implement POST /api/reviews/:id/bookmark toggle with Prisma transaction
- [x] T045 Implement GET /users/me/bookmarks for user's bookmarked reviews
- [x] T046 Implement DELETE /api/bookmarks/:id for direct bookmark removal
- [x] T047 Add Likes and Bookmarks modules to app.module.ts imports
- [x] T048 Add authentication guards to all endpoints

### Implementation Notes

1. Toggle logic: Check existing record, delete if exists, create if not
2. Use Prisma $transaction for atomic operations (like/bookmark + count update)
3. Use increment/decrement for likeCount/bookmarkCount updates
4. Return isLiked/isBookmarked status and updated count in response

### Parallel Opportunities

- Likes module (T035-T037, T041-T043) and Bookmarks module (T038-T040, T044-T046) can proceed in parallel

### Dependencies

- Depends on WP01 (database schema)
- Depends on WP02 (Reviews module for count updates)

### Risks & Mitigations

- **Risk**: Race condition on concurrent toggles
- **Mitigation**: Use database-level unique constraints, handle 409 Conflict gracefully
- **Risk**: likeCount/bookmarkCount desynchronization
- **Mitigation**: Use transactions, add background reconciliation job (optional)

---

## Work Package WP05: Frontend - Feed Store & API Client (Priority: P1) ‚úÖ

**Goal**: Implement Zustand feed store with pagination, infinite scroll state, and API client for reviews, likes, bookmarks.
**Independent Test**: Feed store loads data, handles pagination, toggles like/bookmark with optimistic updates.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP05-frontend-feed-store-api-client.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=11720)

### Included Subtasks

- [x] T049 [P] Install Zustand: `pnpm add zustand`
- [x] T050 [P] Create `packages/frontend/src/types/review.ts` with TypeScript interfaces
- [x] T051 [P] Create `packages/frontend/src/types/book.ts` with TypeScript interfaces
- [x] T052 [P] Create `packages/frontend/src/services/api/reviews.ts` with axios client
- [x] T053 [P] Create `packages/frontend/src/services/api/likes.ts` with axios client
- [x] T054 [P] Create `packages/frontend/src/services/api/bookmarks.ts` with axios client
- [x] T055 Create `packages/frontend/src/stores/feedStore.ts` with Zustand
- [x] T056 Implement loadFeed() action (initial load, page=0)
- [x] T057 Implement loadMore() action (pagination, page++)
- [x] T058 Implement toggleLike() action with optimistic update and rollback on error
- [x] T059 Implement toggleBookmark() action with optimistic update and rollback on error
- [x] T060 Add loading, error, and hasMore state management

### Implementation Notes

1. Feed store shape:
   - reviews: Review[]
   - page: number
   - hasMore: boolean
   - isLoading: boolean
   - error: string | null
2. Optimistic updates: Update UI immediately, rollback on API error
3. Error handling: Toast notifications, retry logic
4. Axios configuration: Base URL, timeout (10s), auth interceptor

### Parallel Opportunities

- Types (T050-T051) and API clients (T052-T054) can proceed in parallel
- Feed store can start after types are defined

### Dependencies

- None (frontend foundation)

### Risks & Mitigations

- **Risk**: Race condition between loadFeed and loadMore
- **Mitigation**: Use isLoading flag to prevent concurrent requests
- **Risk**: Stale data after optimistic update
- **Mitigation**: Implement rollback mechanism on error

---

## Work Package WP06: Frontend - Review Card Component (Priority: P1) ‚úÖ

**Goal**: Implement ReviewCard component displaying book cover, title, author, review excerpt, likes, bookmarks, recommend status.
**Independent Test**: ReviewCard renders correctly with all data fields; like/bookmark buttons trigger store actions.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP06-frontend-review-card-component.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=23535)

### Included Subtasks

- [x] T061 [P] Install shadcn/ui: `npx shadcn-ui@latest init`
- [x] T062 [P] Add shadcn/ui components: `npx shadcn-ui@latest add card button skeleton`
- [x] T063 Create `packages/frontend/src/components/ReviewCard/ReviewCard.tsx`
- [x] T064 Implement book cover display with lazy loading and error fallback
- [x] T065 Implement review excerpt truncation (max 150 chars)
- [x] T066 Implement relative time display (e.g., "3ÏãúÍ∞Ñ Ï†Ñ", fallback to absolute date after 1 year)
- [x] T067 Implement recommend/not recommend icon display (not emoji, use actual icons)
- [x] T068 Implement like button with count and active state
- [x] T069 Implement bookmark button with active state
- [x] T070 Implement share button (opens share modal/options)
- [x] T071 Add click handler to navigate to review detail (React Router)
- [x] T072 Add responsive styling (mobile-first, Tailwind CSS)
- [x] T073 Add hover effects and transitions

### Implementation Notes

1. Use shadcn/ui Card component as base
2. Book cover: <img> with loading="lazy", onError fallback to placeholder
3. Excerpt: CSS line-clamp or JS substring(0, 150) + "..."
4. Relative time: Use date-fns or custom utility
5. Icons: Use lucide-react (ThumbsUp, ThumbsDown, Bookmark, Share)
6. Navigation: React Router's useNavigate() hook

### Parallel Opportunities

- Component structure (T063) and shadcn/ui setup (T061-T062) can proceed in parallel

### Dependencies

- Depends on WP05 (feed store and types)

### Risks & Mitigations

- **Risk**: Image loading performance issues
- **Mitigation**: Implement lazy loading, use Intersection Observer
- **Risk**: Inconsistent styling across browsers
- **Mitigation**: Test on Chrome, Firefox, Safari; use Tailwind's cross-browser utilities

---

## Work Package WP07: Frontend - Infinite Scroll Component (Priority: P1) ‚úÖ

**Goal**: Implement InfiniteScroll component using Intersection Observer with 800px threshold.
**Independent Test**: Scrolling to 800px from bottom triggers loadMore(); loading indicator displays; "no more" message shows at end.
**Prompt**: `kitty-specs/002-feature/tasks/done/WP07-frontend-infinite-scroll-component.md`
**Status**: ‚úÖ COMPLETED (2025-11-09)
**Review**: Approved by claude (shell_pid=49894)

### Included Subtasks

- [x] T074 Create `packages/frontend/src/components/InfiniteScroll/InfiniteScroll.tsx`
- [x] T075 Implement Intersection Observer with rootMargin: '800px'
- [x] T076 Create sentinel element at list bottom for observer target
- [x] T077 Add loading spinner component (shadcn/ui or custom)
- [x] T078 Add "Î™®Îì† ÎèÖÌõÑÍ∞êÏùÑ ÌôïÏù∏ÌñàÏäµÎãàÎã§" end-of-feed message
- [x] T079 Implement cleanup logic (disconnect observer on unmount)
- [x] T080 Handle edge cases (tall screens, rapid scrolling)

### Implementation Notes

1. Intersection Observer API for performance
2. rootMargin: '800px' ensures screen-size-independent triggering
3. Sentinel element: <div ref={sentinelRef} /> at list end
4. Loading state: Display spinner while isLoading=true
5. hasMore state: Hide sentinel when hasMore=false
6. Cleanup: useEffect cleanup function disconnects observer

### Parallel Opportunities

- None (single component, sequential logic)

### Dependencies

- Depends on WP05 (feed store with loadMore action)

### Risks & Mitigations

- **Risk**: Multiple loadMore() calls on fast scrolling
- **Mitigation**: Use isLoading flag to prevent concurrent calls
- **Risk**: Observer not supported in old browsers
- **Mitigation**: Add polyfill or fallback to scroll event listener

---

## Work Package WP08: Frontend - Feed Page (Priority: P1) üéØ MVP

**Goal**: Implement FeedPage component integrating feed store, ReviewCard list, and InfiniteScroll.
**Independent Test**: FeedPage loads on /feed route; displays review cards; infinite scroll loads more; empty/error states handled.
**Prompt**: `kitty-specs/002-feature/tasks/planned/WP08-frontend-feed-page.md`

### Included Subtasks

- [ ] T081 Create `packages/frontend/src/pages/Feed/FeedPage.tsx`
- [ ] T082 Create `packages/frontend/src/pages/Feed/index.tsx` (export)
- [ ] T083 Integrate feedStore with useEffect for initial load
- [ ] T084 Map reviews array to ReviewCard components
- [ ] T085 Integrate InfiniteScroll component at list end
- [ ] T086 Implement loading skeleton for initial load (shadcn/ui skeleton)
- [ ] T087 Implement empty state ("ÏïÑÏßÅ ÏûëÏÑ±Îêú ÎèÖÌõÑÍ∞êÏù¥ ÏóÜÏäµÎãàÎã§")
- [ ] T088 Implement error state with retry button
- [ ] T089 Add route to React Router: `/feed`
- [ ] T090 Set FeedPage as home route (`/` redirects to `/feed`)
- [ ] T091 Add page-level responsive layout (container, padding)

### Implementation Notes

1. useEffect on mount: loadFeed()
2. Loading state: Display skeleton cards (3-5 items)
3. Empty state: Show message + "ÎèÖÌõÑÍ∞ê ÏûëÏÑ±ÌïòÍ∏∞" button
4. Error state: Show message + "Îã§Ïãú ÏãúÎèÑ" button (calls loadFeed)
5. Layout: Container max-width, responsive padding
6. Route protection: Optional auth check for logged-in features

### Parallel Opportunities

- Page structure (T081-T082) and routing (T089-T090) can proceed in parallel

### Dependencies

- Depends on WP06 (ReviewCard component)
- Depends on WP07 (InfiniteScroll component)

### Risks & Mitigations

- **Risk**: Slow initial load
- **Mitigation**: Implement skeleton loading state, optimize API response
- **Risk**: Memory leak from store subscriptions
- **Mitigation**: Use Zustand's built-in cleanup, verify no leaks in DevTools

---

## Work Package WP09: Frontend - Review Detail Page (Priority: P2)

**Goal**: Implement ReviewDetailPage displaying full review content with SPA navigation and scroll position preservation.
**Independent Test**: Clicking ReviewCard navigates to /reviews/:id; full content displays; back button returns to feed with scroll preserved.
**Prompt**: `kitty-specs/002-feature/tasks/planned/WP09-frontend-review-detail-page.md`

### Included Subtasks

- [ ] T092 Create `packages/frontend/src/pages/ReviewDetail/ReviewDetailPage.tsx`
- [ ] T093 Create `packages/frontend/src/pages/ReviewDetail/index.tsx` (export)
- [ ] T094 Implement review detail API call (GET /api/reviews/:id)
- [ ] T095 Display full review content (no truncation)
- [ ] T096 Display book information section (cover, title, author, description)
- [ ] T097 Implement like/bookmark buttons on detail page
- [ ] T098 Implement share functionality (copy link, social media)
- [ ] T099 Add route to React Router: `/reviews/:id`
- [ ] T100 Implement scroll position restoration on back navigation
- [ ] T101 Add loading and error states

### Implementation Notes

1. Use React Router's useParams() to get review ID
2. Fetch review on mount, update viewCount on backend
3. Scroll restoration: Use React Router's ScrollRestoration or custom sessionStorage
4. Share: Copy to clipboard, generate shareable URL
5. Layout: Full-width content, back button in header
6. Responsive: Mobile-optimized reading experience

### Parallel Opportunities

- Detail page structure (T092-T093) can start after routing is defined

### Dependencies

- Depends on WP02 (Reviews API with GET /reviews/:id)
- Depends on WP05 (API client)

### Risks & Mitigations

- **Risk**: Scroll position not restored correctly
- **Mitigation**: Test across browsers, use React Router's built-in ScrollRestoration
- **Risk**: Slow page load on mobile networks
- **Mitigation**: Implement loading skeleton, optimize image loading

---

## Work Package WP10: Frontend - Authentication Integration (Priority: P2)

**Goal**: Integrate authentication state for like/bookmark actions; show login prompt for unauthenticated users.
**Independent Test**: Non-logged-in user sees login prompt on interaction; logged-in user can like/bookmark without prompt.
**Prompt**: `kitty-specs/002-feature/tasks/planned/WP10-frontend-authentication-integration.md`

### Included Subtasks

- [ ] T102 Create or update `packages/frontend/src/stores/authStore.ts` (if not exists)
- [ ] T103 Implement isAuthenticated check in feedStore actions
- [ ] T104 Create login prompt modal/toast for unauthenticated interactions
- [ ] T105 Update ReviewCard like/bookmark buttons to check auth state
- [ ] T106 Redirect to login page with returnUrl on prompt accept
- [ ] T107 Implement returnUrl handling in login flow
- [ ] T108 Add conditional rendering (hide features for non-logged-in users, optional)

### Implementation Notes

1. AuthStore: isAuthenticated, user, token, login, logout actions
2. Login prompt: Modal or toast with "Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§" message
3. ReturnUrl: Store current URL in sessionStorage, redirect after login
4. Conditional rendering: Optionally hide like/bookmark buttons for anonymous users
5. API interceptor: Add Authorization header if token exists

### Parallel Opportunities

- AuthStore (T102) and prompt component (T104) can proceed in parallel

### Dependencies

- Depends on existing auth system (assumed to exist from spec context)
- Depends on WP05 (feed store)

### Risks & Mitigations

- **Risk**: Token expiration during session
- **Mitigation**: Implement token refresh logic, handle 401 errors gracefully
- **Risk**: Poor UX for non-logged-in users
- **Mitigation**: Show clear value proposition before login prompt

---

## Work Package WP11: Polish & Performance (Priority: P3)

**Goal**: Optimize performance, accessibility, and user experience across the feature.
**Independent Test**: Lighthouse scores >90; 60fps scrolling; WCAG AA compliance; error handling validated.
**Prompt**: `kitty-specs/002-feature/tasks/planned/WP11-polish-performance.md`

### Included Subtasks

- [ ] T109 [P] Optimize image loading (lazy loading, WebP format)
- [ ] T110 [P] Add ARIA labels and semantic HTML for accessibility
- [ ] T111 [P] Implement keyboard navigation for feed (arrow keys, Enter)
- [ ] T112 [P] Add focus management for modals and prompts
- [ ] T113 [P] Optimize bundle size (code splitting, tree shaking)
- [ ] T114 [P] Add error boundaries for React components
- [ ] T115 [P] Implement retry logic for failed API calls
- [ ] T116 [P] Add loading skeletons for all async states
- [ ] T117 Validate performance targets (2s load, 60fps scroll, <200ms API)
- [ ] T118 Run Lighthouse audit and fix issues
- [ ] T119 Test on mobile devices (iOS Safari, Android Chrome)
- [ ] T120 Test with screen readers (VoiceOver, NVDA)

### Implementation Notes

1. Image optimization: Use next-gen formats, implement srcset
2. Accessibility: Follow WCAG 2.1 AA guidelines
3. Performance: Measure with Chrome DevTools, optimize critical path
4. Error boundaries: Catch React errors, display fallback UI
5. Code splitting: Use React.lazy() and Suspense for routes
6. Mobile testing: Test on real devices or BrowserStack

### Parallel Opportunities

- Most subtasks (T109-T116) can proceed in parallel

### Dependencies

- Depends on WP08 (FeedPage) and WP09 (ReviewDetailPage) being functional

### Risks & Mitigations

- **Risk**: Performance regression on low-end devices
- **Mitigation**: Test on throttled network/CPU, optimize critical assets
- **Risk**: Accessibility issues undiscovered
- **Mitigation**: Use automated tools (axe, Lighthouse), manual screen reader testing

---

## Dependency & Execution Summary

- **Sequence**: WP01 ‚Üí WP02, WP03, WP04 (backend modules) ‚Üí WP05 ‚Üí WP06, WP07 ‚Üí WP08 (MVP) ‚Üí WP09, WP10, WP11 (enhancements)
- **Parallelization**:
  - WP02 (Reviews), WP03 (Books), WP04 (Likes/Bookmarks) can proceed in parallel after WP01
  - WP06 (ReviewCard), WP07 (InfiniteScroll) can proceed in parallel after WP05
- **MVP Scope**: WP01-WP08 constitute the minimal viable product (feed with infinite scroll, like/bookmark)
- **Enhancement Scope**: WP09 (detail page), WP10 (auth integration), WP11 (polish) are post-MVP

---

## Subtask Index (Reference)

| Subtask ID | Summary                              | Work Package | Priority | Parallel? |
| ---------- | ------------------------------------ | ------------ | -------- | --------- |
| T001       | Update schema.prisma with new models | WP01         | P0       | No        |
| T002       | Add enums to schema                  | WP01         | P0       | No        |
| T003       | Update User model relations          | WP01         | P0       | No        |
| T004       | Generate migration                   | WP01         | P0       | No        |
| T005       | Regenerate Prisma Client             | WP01         | P0       | No        |
| T006       | Update seed.ts                       | WP01         | P0       | No        |
| T007       | Verify migrations                    | WP01         | P0       | No        |
| T008-T020  | Reviews module implementation        | WP02         | P0       | Partial   |
| T021-T034  | Books module implementation          | WP03         | P0       | Partial   |
| T035-T048  | Likes & Bookmarks modules            | WP04         | P0       | Partial   |
| T049-T060  | Feed store and API client            | WP05         | P1       | Partial   |
| T061-T073  | ReviewCard component                 | WP06         | P1       | ‚úÖ Done   |
| T074-T080  | InfiniteScroll component             | WP07         | P1       | No        |
| T081-T091  | FeedPage component                   | WP08         | P1       | Partial   |
| T092-T101  | ReviewDetailPage                     | WP09         | P2       | Partial   |
| T102-T108  | Authentication integration           | WP10         | P2       | Partial   |
| T109-T120  | Polish & performance                 | WP11         | P3       | Yes       |

---

> This tasks.md is the high-level checklist. Detailed implementation guidance is in individual work package prompt files under `kitty-specs/002-feature/tasks/planned/`.
