# Feature Specification: 독후감 메인 피드

_Path: [kitty-specs/002-feature/spec.md](kitty-specs/002-feature/spec.md)_

**Feature Branch**: `002-feature`
**Created**: 2025-11-09
**Status**: Draft
**Input**: User description: "사용자가 로그인하면 가장 처음 보이는, 다른 사용자들이 서비스에 작성한 독후감들이 시간순으로 보이는 메인 피드"

## Clarifications

### Session 2025-11-09

- Q: 독후감 카드에서 "추천/비추천 여부"는 어떻게 시각적으로 표현되나요? → A: 추천/비추천 아이콘으로 표시
- Q: 비로그인 사용자도 독후감 피드를 볼 수 있나요, 아니면 로그인한 사용자만 볼 수 있나요? → A: 비로그인 사용자도 피드 조회 가능 (읽기 전용)
- Q: 독후감 카드를 클릭했을 때 상세 페이지가 어떻게 열리나요? → A: 같은 페이지에서 전환 (SPA 방식)
- Q: 피드 로딩 시 네트워크 타임아웃은 몇 초로 설정하나요? → A: 10초
- Q: 무한 스크롤에서 몇 개의 독후감이 남았을 때 다음 페이지를 미리 로드하나요? → A: 하단으로부터 800px 이내 도달 시 (화면 크기 무관하게 일관된 경험 제공)

## User Scenarios & Testing

### User Story 1 - 독후감 피드 탐색 (Priority: P1)

로그인 여부와 관계없이 사용자는 메인 화면에서 다른 사용자들이 작성한 독후감 목록을 최신순으로 볼 수 있습니다. 각 독후감 카드에는 책 표지 이미지, 책 제목, 작성자 이름, 독후감 미리보기(일부), 작성 시간, 좋아요 수, 추천/비추천 여부(추천/비추천 아이콘)가 표시됩니다. 비로그인 사용자는 조회만 가능하며, 좋아요/북마크/공유 등의 상호작용 기능은 로그인이 필요합니다.

**Why this priority**: 이것이 기능의 핵심이며, 사용자가 로그인 후 가장 먼저 보는 화면입니다. 이 기능 없이는 다른 모든 기능이 의미가 없습니다.

**Independent Test**: 로그인 후 메인 화면에 접속하여 독후감 목록이 올바른 형식으로 표시되고 최신순으로 정렬되어 있는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 로그인된 사용자이고 서비스에 독후감이 5개 이상 존재하는 상태, **When** 메인 화면에 접속하면, **Then** 최신 독후감부터 시간 역순으로 정렬된 피드가 표시된다
2. **Given** 비로그인 사용자이고 서비스에 독후감이 5개 이상 존재하는 상태, **When** 메인 화면에 접속하면, **Then** 최신 독후감부터 시간 역순으로 정렬된 피드가 표시된다 (로그인 사용자와 동일한 내용 조회 가능)
3. **Given** 독후감 피드가 표시된 상태, **When** 각 독후감 카드를 확인하면, **Then** 책 표지, 책 제목, 작성자 이름, 독후감 일부(최대 3줄 또는 150자), 작성 시간(상대 시간 예: "3시간 전"), 좋아요 수, 추천/비추천 표시가 모두 보여진다
4. **Given** 피드가 표시된 상태, **When** 사용자가 위아래로 스크롤하면, **Then** 피드가 부드럽게 스크롤되며 모든 독후감 카드가 올바르게 표시된다
5. **Given** 비로그인 사용자가 피드를 보고 있는 상태, **When** 좋아요/북마크/공유 버튼을 클릭하면, **Then** 로그인 유도 메시지와 함께 로그인 페이지로 이동할 수 있는 버튼이 표시된다

---

### User Story 2 - 독후감 상세 보기 (Priority: P2)

사용자는 피드에서 관심 있는 독후감 카드를 클릭하여 같은 페이지에서 전체 내용을 볼 수 있습니다(SPA 방식).

**Why this priority**: 피드에서 독후감을 탐색한 후 자연스럽게 이어지는 행동이며, 사용자가 완전한 내용을 소비하기 위해 필수적인 기능입니다.

**Independent Test**: 피드에서 독후감 카드를 클릭하여 같은 페이지에서 상세 내용으로 전환되고, 전체 내용이 표시되는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 독후감 피드가 표시된 상태, **When** 사용자가 특정 독후감 카드를 클릭하면, **Then** 같은 페이지에서 해당 독후감의 전체 내용을 보여주는 상세 뷰로 전환된다 (새 탭이나 팝업 없이)
2. **Given** 독후감 상세 페이지에 있는 상태, **When** 사용자가 뒤로가기를 하면, **Then** 이전 피드 화면으로 돌아가며 스크롤 위치가 유지된다

---

### User Story 3 - 독후감 반응 (Priority: P3)

사용자는 마음에 드는 독후감에 좋아요를 누르거나, 나중에 다시 보기 위해 북마크할 수 있습니다.

**Why this priority**: 사용자 참여를 높이고 개인화된 경험을 제공하는 부가 기능입니다. 핵심 탐색 기능 이후에 추가될 수 있습니다.

**Independent Test**: 독후감 카드에서 좋아요 버튼을 클릭하여 카운트가 증가하는지, 북마크 버튼을 클릭하여 저장되는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 피드에서 특정 독후감 카드를 보고 있는 상태, **When** 좋아요 버튼을 클릭하면, **Then** 좋아요 수가 1 증가하고 버튼이 활성화 상태로 변경된다
2. **Given** 사용자가 이미 좋아요를 누른 독후감을 보고 있는 상태, **When** 좋아요 버튼을 다시 클릭하면, **Then** 좋아요가 취소되고 좋아요 수가 1 감소한다
3. **Given** 사용자가 피드에서 특정 독후감 카드를 보고 있는 상태, **When** 북마크 버튼을 클릭하면, **Then** 독후감이 사용자의 북마크 목록에 저장되고 버튼이 활성화 상태로 변경된다
4. **Given** 사용자가 이미 북마크한 독후감을 보고 있는 상태, **When** 북마크 버튼을 다시 클릭하면, **Then** 북마크가 해제되고 버튼이 비활성화 상태로 변경된다

---

### User Story 4 - 독후감 공유 (Priority: P4)

사용자는 마음에 드는 독후감을 다른 사람과 공유할 수 있습니다.

**Why this priority**: 바이럴 효과와 사용자 확산을 위한 기능이지만, 초기 MVP에서는 필수적이지 않습니다.

**Independent Test**: 독후감 카드에서 공유 버튼을 클릭하여 공유 옵션이 표시되는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 피드에서 특정 독후감 카드를 보고 있는 상태, **When** 공유 버튼을 클릭하면, **Then** 공유 옵션(링크 복사, SNS 공유 등)이 표시된다
2. **Given** 공유 옵션이 표시된 상태, **When** "링크 복사" 옵션을 선택하면, **Then** 독후감 페이지 링크가 클립보드에 복사되고 확인 메시지가 표시된다

---

### User Story 5 - 추가 피드 로딩 (Priority: P5)

사용자는 피드를 아래로 스크롤하면 자동으로 더 많은 독후감이 로드되어 끊김 없이 탐색할 수 있습니다.

**Why this priority**: 사용자 경험을 개선하는 기능이지만, 초기에는 페이지네이션으로 대체 가능합니다.

**Independent Test**: 피드 하단까지 스크롤하여 추가 독후감이 자동으로 로드되는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 피드를 스크롤하는 상태, **When** 하단으로부터 800px 이내에 도달하면, **Then** 다음 페이지의 독후감이 자동으로 로드되어 피드에 추가된다
2. **Given** 추가 독후감을 로딩 중인 상태, **When** 로딩이 진행되면, **Then** 피드 하단에 로딩 인디케이터가 표시된다
3. **Given** 마지막 페이지까지 모두 로드된 상태, **When** 피드 하단까지 스크롤하면, **Then** "모든 독후감을 확인했습니다" 메시지가 표시된다
4. **Given** 세로로 긴 화면(예: 1080x1920)에서 피드를 보는 상태, **When** 하단으로부터 800px 이내에 도달하면, **Then** 화면 크기와 무관하게 일관되게 다음 페이지가 로드된다

---

### Edge Cases

- **피드에 독후감이 하나도 없는 경우**: "아직 작성된 독후감이 없습니다" 안내 메시지와 함께 독후감 작성을 유도하는 버튼을 표시한다
- **피드 로딩 실패**: 에러 메시지와 함께 "다시 시도" 버튼을 표시한다
- **네트워크 연결이 불안정한 경우**: 로딩 인디케이터를 표시하고, 10초 타임아웃 시 에러 메시지를 표시한다
- **책 표지 이미지 로딩 실패**: 기본 책 표지 플레이스홀더 이미지를 표시한다
- **독후감 내용이 매우 긴 경우**: 미리보기는 최대 3줄 또는 150자로 제한하고 "..." 으로 표시한다
- **작성 시간이 매우 오래된 경우**: "3개월 전", "1년 전" 등 상대 시간으로 표시하되, 1년 이상인 경우 절대 날짜(예: "2023년 5월 1일")로 표시한다
- **사용자가 빠르게 스크롤하는 경우**: 이미지 지연 로딩(lazy loading)을 통해 성능을 최적화한다
- **좋아요/북마크 요청 실패**: 사용자에게 에러를 알리고 이전 상태로 되돌린다
- **비로그인 사용자가 상호작용 시도**: 로그인 유도 메시지를 표시하고 로그인 페이지로 이동할 수 있는 버튼을 제공한다
- **세로로 긴 화면에서 무한 스크롤**: 화면 크기와 무관하게 하단 800px 기준으로 다음 페이지를 로드하여 일관된 경험을 제공한다

## Requirements

### Functional Requirements

- **FR-001**: 시스템은 모든 사용자가 작성한 독후감을 작성 시간 기준 최신순으로 정렬하여 피드에 표시해야 한다
- **FR-002**: 각 독후감 카드는 책 표지 이미지, 책 제목, 작성자 이름, 독후감 일부(최대 150자), 작성 시간, 좋아요 수, 추천/비추천 여부(추천/비추천 아이콘)를 포함해야 한다
- **FR-003**: 사용자는 독후감 카드를 클릭하여 같은 페이지에서 전체 내용을 볼 수 있어야 한다 (SPA 방식, 새 탭이나 팝업 없음)
- **FR-004**: 사용자는 독후감에 좋아요를 추가하거나 취소할 수 있어야 한다
- **FR-005**: 사용자는 독후감을 북마크하거나 북마크를 해제할 수 있어야 한다
- **FR-006**: 사용자는 독후감을 공유할 수 있어야 한다 (링크 복사 포함)
- **FR-007**: 시스템은 사용자가 피드 하단으로부터 800px 이내에 도달하면 자동으로 다음 페이지의 독후감을 로드해야 한다 (무한 스크롤, 화면 크기 무관)
- **FR-008**: 시스템은 한 번에 로드되는 독후감 수를 제한해야 한다 (성능 최적화)
- **FR-009**: 시스템은 피드가 비어있을 때 적절한 안내 메시지를 표시해야 한다
- **FR-010**: 시스템은 피드 로딩 중 로딩 인디케이터를 표시해야 한다
- **FR-011**: 시스템은 피드 로딩 실패 시 에러 메시지와 재시도 옵션을 제공해야 한다 (네트워크 타임아웃 10초)
- **FR-012**: 시스템은 책 표지 이미지가 없거나 로딩 실패 시 기본 플레이스홀더 이미지를 표시해야 한다
- **FR-013**: 시스템은 작성 시간을 상대 시간 형식(예: "3시간 전")으로 표시해야 하며, 1년 이상 경과 시 절대 날짜로 표시해야 한다
- **FR-014**: 시스템은 사용자의 좋아요 및 북마크 상태를 실시간으로 반영해야 한다
- **FR-015**: 시스템은 독후감 상세 페이지에서 뒤로가기 시 이전 피드 스크롤 위치를 유지해야 한다
- **FR-016**: 시스템은 비로그인 사용자도 독후감 피드를 조회할 수 있도록 해야 한다 (읽기 전용)
- **FR-017**: 시스템은 비로그인 사용자가 좋아요, 북마크, 공유 등의 상호작용 기능을 시도할 때 로그인 유도 메시지를 표시해야 한다

### Key Entities

- **독후감(Review)**: 사용자가 특정 책에 대해 작성한 감상 및 의견. 작성자, 책 정보, 내용, 작성 시간, 좋아요 수, 추천/비추천 여부를 포함
- **책(Book)**: 독후감의 대상이 되는 책. 제목, 표지 이미지, 저자 등의 정보를 포함
- **사용자(User)**: 독후감을 작성하고 피드를 탐색하는 서비스 사용자. 이름, 프로필 정보를 포함
- **좋아요(Like)**: 사용자가 특정 독후감에 대해 표현한 긍정적인 반응
- **북마크(Bookmark)**: 사용자가 나중에 다시 보기 위해 저장한 독후감
- **피드 아이템(Feed Item)**: 피드에 표시되는 독후감 카드의 표현 형태. 독후감, 책, 작성자 정보를 조합한 뷰

## Success Criteria

### Measurable Outcomes

- **SC-001**: 사용자는 로그인 후 2초 이내에 피드의 첫 화면(최소 10개 독후감)을 볼 수 있어야 한다
- **SC-002**: 시스템은 동시에 500명 이상의 사용자가 피드를 탐색해도 성능 저하 없이 작동해야 한다
- **SC-003**: 피드 스크롤이 초당 60프레임 이상으로 부드럽게 작동해야 한다
- **SC-004**: 사용자의 80% 이상이 피드 로딩 시 이탈하지 않고 최소 5개 이상의 독후감을 탐색해야 한다
- **SC-005**: 좋아요 및 북마크 액션이 1초 이내에 반영되어야 한다
- **SC-006**: 무한 스크롤로 추가 독후감을 로드하는 데 3초 이내가 소요되어야 한다
- **SC-007**: 피드 로딩 성공률이 99% 이상이어야 한다 (네트워크 에러 제외)
- **SC-008**: 사용자의 90% 이상이 독후감 카드에서 필요한 정보(책 제목, 작성자, 미리보기)를 쉽게 파악할 수 있어야 한다
- **SC-009**: 책 표지 이미지가 화면에 보이기 전에 지연 로딩되어 초기 로딩 시간이 30% 이상 단축되어야 한다

## Assumptions

1. 피드 조회는 로그인 여부와 관계없이 가능하며, 좋아요/북마크/공유 등의 상호작용 기능만 로그인이 필요하다. 인증 상태 확인 로직은 이 기능의 범위 밖이다
2. 독후감 데이터는 이미 백엔드 시스템에 저장되어 있으며, API를 통해 조회 가능하다
3. 책 표지 이미지는 외부 URL 또는 서버에 저장된 이미지 경로로 제공된다
4. 한 번에 로드되는 독후감 수는 20개로 가정한다 (성능과 사용자 경험의 균형)
5. 추천/비추천 여부는 독후감 작성자가 책에 대해 남긴 평가이며, 피드 탐색자의 평가가 아니다
6. 공유 기능은 웹 공유 API 또는 링크 복사로 구현하며, 특정 SNS 통합은 이 기능의 범위 밖이다
7. 피드는 모든 사용자에게 동일한 독후감을 보여주며, 개인화된 추천 알고리즘은 향후 단계에서 추가된다
8. 독후감 내용의 미리보기는 순수 텍스트로 표시하며, 이미지나 마크다운 포맷은 무시한다
9. 스크롤 위치 유지는 브라우저 세션 내에서만 동작하며, 새로고침 시 초기화된다

## Out of Scope

- 독후감 작성 기능
- 독후감 수정 및 삭제 기능
- 사용자 프로필 페이지
- 독후감 검색 기능
- 독후감 필터링 (장르별, 평점별 등)
- 개인화된 추천 알고리즘
- 댓글 기능
- 팔로우/언팔로우 기능
- 알림 기능
- 독후감 신고 기능
