# 08. ì„¤ì • í˜ì´ì§€ êµ¬í˜„ ìš”êµ¬ì‚¬í•­

## í˜ì´ì§€ ì •ë³´
- **ê²½ë¡œ**: `/settings`
- **ìš°ì„ ìˆœìœ„**: 2ìˆœìœ„ (Core Features)
- **ì„¤ëª…**: ê°œì¸ ì„¤ì •, ê³„ì • ê´€ë¦¬, ì•Œë¦¼ ì„¤ì •, ê°œì¸ì •ë³´ ë³´í˜¸
- **ì¸ì¦**: ë¡œê·¸ì¸ í•„ìˆ˜

## ğŸ“‹ ì°¸ì¡° ë¬¸ì„œ

### ì‚¬ìš©ì í”Œë¡œìš°
- **[í”„ë¡œí•„ ê´€ë¦¬](../user-flows/profile-management.md)** - í”„ë¡œí•„ í¸ì§‘, ê³„ì • ì‚­ì œ, í”„ë¡œí•„ ì‚¬ì§„ ê´€ë¦¬
- **[ì•Œë¦¼ ì‹œìŠ¤í…œ](../user-flows/notifications.md)** - ì•Œë¦¼ ì„¤ì •, ìŠ¤ë§ˆíŠ¸ ê´€ë¦¬
- **[ì˜¤ë¥˜ ì²˜ë¦¬](../user-flows/error-handling.md)** - ì„¤ì • ì €ì¥ ì‹¤íŒ¨, ê²€ì¦ ì˜¤ë¥˜

### í”„ë¡œì íŠ¸ êµ¬ì¡°
- **[êµ¬í˜„ í˜ì´ì§€ ëª©ë¡](../implementation-pages.md)** - ì„¤ì •ì˜ ì‚¬ìš©ì ê´€ë¦¬ ì²´ì¸
- **[ì‚¬ìš©ì íë¦„ë„ ê°œìš”](../user-flows.md)** - í”„ë¡œí•„ ë° í™œë™ ê´€ë¦¬ íë¦„

### ê´€ë ¨ PRD ë¬¸ì„œ
- **[í”„ë¡œí•„ í˜ì´ì§€](./07-profile.md)** - í”„ë¡œí•„ í¸ì§‘ ì—°ê²°ì 
- **[ì•Œë¦¼ í˜ì´ì§€](./10-notifications.md)** - ì•Œë¦¼ ì„¤ì •ê³¼ ì‹¤ì œ ì•Œë¦¼ í˜ì´ì§€
- **[ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€](./12-forgot-password.md)** - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì •ì±… ê³µìœ 
- **[ì‹ ê³ /ì°¨ë‹¨ ê´€ë¦¬ í˜ì´ì§€](./13-moderation.md)** - ì°¨ë‹¨ ëª©ë¡ ê´€ë¦¬

## í•µì‹¬ ê¸°ëŠ¥

### 1. ê³„ì • ì„¤ì •
- **ê¸°ë³¸ ì •ë³´ í¸ì§‘**: ë‹‰ë„¤ì„, ì´ë©”ì¼, ìê¸°ì†Œê°œ
- **í”„ë¡œí•„ ì‚¬ì§„ ê´€ë¦¬**: ì—…ë¡œë“œ, ë³€ê²½, ì‚­ì œ
- **ë¹„ë°€ë²ˆí˜¸ ë³€ê²½**: í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„ ë³€ê²½
- **ê³„ì • ì—°ê²°**: ì†Œì…œ ë¡œê·¸ì¸ ê³„ì • ì—°ê²°/í•´ì œ
- **ê³„ì • ì‚­ì œ**: 30ì¼ ìœ ì˜ˆê¸°ê°„ í›„ ì™„ì „ ì‚­ì œ

### 2. ê°œì¸ì •ë³´ ë³´í˜¸ ì„¤ì •
- **í”„ë¡œí•„ ê³µê°œ ë²”ìœ„**: ì „ì²´ê³µê°œ, íŒ”ë¡œì›Œë§Œ, ë¹„ê³µê°œ
- **í™œë™ ë‚´ì—­ ê³µê°œ**: ë…í›„ê°, ì¢‹ì•„ìš”, ëŒ“ê¸€ ê³µê°œ ë²”ìœ„
- **ê²€ìƒ‰ ë…¸ì¶œ**: ê²€ìƒ‰ ê²°ê³¼ ë…¸ì¶œ ì—¬ë¶€
- **ë°ì´í„° ë‹¤ìš´ë¡œë“œ**: ê°œì¸ ë°ì´í„° ë‚´ë³´ë‚´ê¸°

### 3. ì•Œë¦¼ ì„¤ì •
- **ì•Œë¦¼ ìœ í˜•ë³„ ì„¤ì •**: ì¢‹ì•„ìš”, ëŒ“ê¸€, íŒ”ë¡œìš° ì•Œë¦¼ ê°œë³„ ì œì–´
- **ì•Œë¦¼ ì‹œê°„ ì„¤ì •**: ë°©í•´ê¸ˆì§€ ì‹œê°„ ì„¤ì •
- **ì´ë©”ì¼ ì•Œë¦¼**: ì£¼ìš” ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡ ì—¬ë¶€
- **í‘¸ì‹œ ì•Œë¦¼**: ë¸Œë¼ìš°ì € í‘¸ì‹œ ì•Œë¦¼ í—ˆìš© ì—¬ë¶€

### 4. ì„œë¹„ìŠ¤ ì„¤ì •
- **í…Œë§ˆ ì„¤ì •**: ë¼ì´íŠ¸/ë‹¤í¬ ëª¨ë“œ, ìë™ ëª¨ë“œ
- **ì–¸ì–´ ì„¤ì •**: í•œêµ­ì–´, ì˜ì–´ (í–¥í›„ í™•ì¥)
- **í”¼ë“œ ì„¤ì •**: ê¸°ë³¸ í”¼ë“œ íƒ­, ì½˜í…ì¸  í•„í„°ë§
- **ë°ì´í„° ì ˆì•½**: ì´ë¯¸ì§€ í’ˆì§ˆ, ìë™ì¬ìƒ ì„¤ì •

## í•„ìš”í•œ API

### GET `/api/settings`
```typescript
interface UserSettingsResponse {
  user: {
    id: string;
    username: string;
    email: string;
    bio?: string;
    profileImage?: string;
    createdAt: string;
  };
  
  privacy: {
    profileVisibility: 'public' | 'followers' | 'private';
    activityVisibility: 'public' | 'followers' | 'private';
    searchable: boolean;
    showEmail: boolean;
    showFollowers: boolean;
    showFollowing: boolean;
  };
  
  notifications: {
    likes: {
      enabled: boolean;
      email: boolean;
      push: boolean;
    };
    comments: {
      enabled: boolean;
      email: boolean;
      push: boolean;
    };
    follows: {
      enabled: boolean;
      email: boolean;
      push: boolean;
    };
    quietHours: {
      enabled: boolean;
      startTime: string; // "22:00"
      endTime: string;   // "08:00"
    };
  };
  
  preferences: {
    theme: 'light' | 'dark' | 'auto';
    language: 'ko' | 'en';
    defaultFeedTab: 'recommended' | 'latest' | 'following';
    contentFilter: {
      hideNSFW: boolean;
      hideSpoilers: boolean;
      hideNegativeReviews: boolean;
    };
    dataUsage: {
      imageQuality: 'low' | 'medium' | 'high';
      autoplayVideos: boolean;
      preloadImages: boolean;
    };
  };
  
  connectedAccounts: Array<{
    provider: 'google' | 'kakao' | 'naver';
    email: string;
    connectedAt: string;
  }>;
}
```

### PUT `/api/settings/profile`
```typescript
interface UpdateProfileRequest {
  username?: string;
  bio?: string;
  profileImage?: string;
}

interface UpdateProfileResponse {
  success: boolean;
  user: {
    username: string;
    bio?: string;
    profileImage?: string;
  };
  errors?: Array<{
    field: string;
    message: string;
  }>;
}
```

### PUT `/api/settings/email`
```typescript
interface UpdateEmailRequest {
  newEmail: string;
  password: string;
}

interface UpdateEmailResponse {
  success: boolean;
  message: string;
  requiresVerification: boolean;
  verificationSent: boolean;
}
```

### PUT `/api/settings/password`
```typescript
interface UpdatePasswordRequest {
  currentPassword: string;
  newPassword: string;
  confirmPassword: string;
}

interface UpdatePasswordResponse {
  success: boolean;
  message: string;
  errors?: Array<{
    field: string;
    message: string;
  }>;
}
```

### PUT `/api/settings/privacy`
```typescript
interface UpdatePrivacyRequest {
  profileVisibility?: 'public' | 'followers' | 'private';
  activityVisibility?: 'public' | 'followers' | 'private';
  searchable?: boolean;
  showEmail?: boolean;
  showFollowers?: boolean;
  showFollowing?: boolean;
}

interface UpdatePrivacyResponse {
  success: boolean;
  privacy: PrivacySettings;
}
```

### PUT `/api/settings/notifications`
```typescript
interface UpdateNotificationsRequest {
  likes?: {
    enabled?: boolean;
    email?: boolean;
    push?: boolean;
  };
  comments?: {
    enabled?: boolean;
    email?: boolean;
    push?: boolean;
  };
  follows?: {
    enabled?: boolean;
    email?: boolean;
    push?: boolean;
  };
  quietHours?: {
    enabled?: boolean;
    startTime?: string;
    endTime?: string;
  };
}

interface UpdateNotificationsResponse {
  success: boolean;
  notifications: NotificationSettings;
}
```

### PUT `/api/settings/preferences`
```typescript
interface UpdatePreferencesRequest {
  theme?: 'light' | 'dark' | 'auto';
  language?: 'ko' | 'en';
  defaultFeedTab?: 'recommended' | 'latest' | 'following';
  contentFilter?: {
    hideNSFW?: boolean;
    hideSpoilers?: boolean;
    hideNegativeReviews?: boolean;
  };
  dataUsage?: {
    imageQuality?: 'low' | 'medium' | 'high';
    autoplayVideos?: boolean;
    preloadImages?: boolean;
  };
}

interface UpdatePreferencesResponse {
  success: boolean;
  preferences: UserPreferences;
}
```

### POST `/api/settings/account/connect`
```typescript
interface ConnectAccountRequest {
  provider: 'google' | 'kakao' | 'naver';
  authCode: string;
}

interface ConnectAccountResponse {
  success: boolean;
  connectedAccount: {
    provider: string;
    email: string;
    connectedAt: string;
  };
}
```

### DELETE `/api/settings/account/disconnect`
```typescript
interface DisconnectAccountRequest {
  provider: 'google' | 'kakao' | 'naver';
}

interface DisconnectAccountResponse {
  success: boolean;
  remainingMethods: string[];
  warning?: string; // ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ë°©ë²•ì¸ ê²½ìš° ê²½ê³ 
}
```

### GET `/api/settings/data-export`
```typescript
interface DataExportResponse {
  downloadUrl: string;
  expiresAt: string;
  fileSize: number;
  format: 'json' | 'csv';
}
```

### POST `/api/settings/account/delete`
```typescript
interface DeleteAccountRequest {
  password: string;
  reason?: string;
  feedback?: string;
}

interface DeleteAccountResponse {
  success: boolean;
  deletionDate: string; // 30ì¼ í›„ ì‹¤ì œ ì‚­ì œì¼
  cancellationToken: string; // ì‚­ì œ ì·¨ì†Œìš© í† í°
}
```

### POST `/api/settings/account/cancel-deletion`
```typescript
interface CancelDeletionRequest {
  cancellationToken: string;
}

interface CancelDeletionResponse {
  success: boolean;
  message: string;
}
```

## ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 1. SettingsPage (ë©”ì¸ ì»´í¬ë„ŒíŠ¸)
```typescript
interface SettingsPageProps {
  initialData?: UserSettingsResponse;
}

// ìƒíƒœ ê´€ë¦¬
- activeTab: 'profile' | 'privacy' | 'notifications' | 'preferences' | 'account'
- settings: UserSettingsResponse
- isLoading: boolean
- hasChanges: boolean
- isSaving: boolean
```

### 2. SettingsNavigation (ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜)
```typescript
interface SettingsNavigationProps {
  activeTab: string;
  onTabChange: (tab: string) => void;
  hasUnsavedChanges: boolean;
}

// íƒ­ ëª©ë¡
- í”„ë¡œí•„ ì„¤ì •
- ê°œì¸ì •ë³´ ë³´í˜¸
- ì•Œë¦¼ ì„¤ì •
- ì„œë¹„ìŠ¤ ì„¤ì •
- ê³„ì • ê´€ë¦¬
```

### 3. ProfileSettings (í”„ë¡œí•„ ì„¤ì •)
```typescript
interface ProfileSettingsProps {
  user: UserProfile;
  onUpdate: (data: UpdateProfileRequest) => Promise<void>;
  isLoading: boolean;
}

// í•˜ìœ„ ì»´í¬ë„ŒíŠ¸
- ProfileImageUpload: í”„ë¡œí•„ ì‚¬ì§„ ì—…ë¡œë“œ/í¸ì§‘
- UsernameField: ë‹‰ë„¤ì„ ì…ë ¥ + ì¤‘ë³µ í™•ì¸
- BioField: ìê¸°ì†Œê°œ í…ìŠ¤íŠ¸ì—ë¦¬ì–´
- EmailField: ì´ë©”ì¼ ë³€ê²½ (ë³„ë„ í™•ì¸ í•„ìš”)
```

### 4. PrivacySettings (ê°œì¸ì •ë³´ ì„¤ì •)
```typescript
interface PrivacySettingsProps {
  privacy: PrivacySettings;
  onUpdate: (privacy: UpdatePrivacyRequest) => Promise<void>;
  isLoading: boolean;
}

// ì„¤ì • í•­ëª©
- í”„ë¡œí•„ ê³µê°œ ë²”ìœ„
- í™œë™ ë‚´ì—­ ê³µê°œ ë²”ìœ„
- ê²€ìƒ‰ ë…¸ì¶œ ì—¬ë¶€
- ì´ë©”ì¼ ì£¼ì†Œ ê³µê°œ ì—¬ë¶€
- íŒ”ë¡œì›Œ/íŒ”ë¡œì‰ ëª©ë¡ ê³µê°œ ì—¬ë¶€
```

### 5. NotificationSettings (ì•Œë¦¼ ì„¤ì •)
```typescript
interface NotificationSettingsProps {
  notifications: NotificationSettings;
  onUpdate: (notifications: UpdateNotificationsRequest) => Promise<void>;
  isLoading: boolean;
}

// ì„¤ì • í•­ëª©
- ì•Œë¦¼ ìœ í˜•ë³„ on/off
- ì´ë©”ì¼ ì•Œë¦¼ ì—¬ë¶€
- í‘¸ì‹œ ì•Œë¦¼ ì—¬ë¶€
- ë°©í•´ê¸ˆì§€ ì‹œê°„ ì„¤ì •
```

### 6. PreferenceSettings (ì„œë¹„ìŠ¤ ì„¤ì •)
```typescript
interface PreferenceSettingsProps {
  preferences: UserPreferences;
  onUpdate: (preferences: UpdatePreferencesRequest) => Promise<void>;
  isLoading: boolean;
}

// ì„¤ì • í•­ëª©
- í…Œë§ˆ ì„ íƒ (ë¼ì´íŠ¸/ë‹¤í¬/ìë™)
- ê¸°ë³¸ í”¼ë“œ íƒ­
- ì½˜í…ì¸  í•„í„°ë§ ì˜µì…˜
- ë°ì´í„° ì‚¬ìš©ëŸ‰ ì„¤ì •
```

### 7. AccountManagement (ê³„ì • ê´€ë¦¬)
```typescript
interface AccountManagementProps {
  connectedAccounts: ConnectedAccount[];
  onConnect: (provider: string) => Promise<void>;
  onDisconnect: (provider: string) => Promise<void>;
  onPasswordChange: (data: UpdatePasswordRequest) => Promise<void>;
  onDeleteAccount: () => void;
}

// ê¸°ëŠ¥
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- ì†Œì…œ ê³„ì • ì—°ê²°/í•´ì œ
- ë°ì´í„° ë‹¤ìš´ë¡œë“œ
- ê³„ì • ì‚­ì œ
```

### 8. DeleteAccountModal (ê³„ì • ì‚­ì œ ëª¨ë‹¬)
```typescript
interface DeleteAccountModalProps {
  isOpen: boolean;
  onClose: () => void;
  onConfirm: (data: DeleteAccountRequest) => Promise<void>;
  isLoading: boolean;
}

// ì‚­ì œ ì ˆì°¨
- ë¹„ë°€ë²ˆí˜¸ í™•ì¸
- ì‚­ì œ ì‚¬ìœ  ì„ íƒ (ì„ íƒì‚¬í•­)
- í”¼ë“œë°± ì…ë ¥ (ì„ íƒì‚¬í•­)
- 30ì¼ ìœ ì˜ˆê¸°ê°„ ì•ˆë‚´
- ë°ì´í„° ë°±ì—… ì˜µì…˜
```

## ìƒíƒœ ê´€ë¦¬ (Zustand)

### SettingsStore
```typescript
interface SettingsState {
  // ìƒíƒœ
  settings: UserSettingsResponse | null;
  activeTab: string;
  hasUnsavedChanges: boolean;
  isLoading: boolean;
  isSaving: boolean;
  error: string | null;
  
  // ì•¡ì…˜
  loadSettings: () => Promise<void>;
  updateProfile: (data: UpdateProfileRequest) => Promise<void>;
  updateEmail: (data: UpdateEmailRequest) => Promise<void>;
  updatePassword: (data: UpdatePasswordRequest) => Promise<void>;
  updatePrivacy: (data: UpdatePrivacyRequest) => Promise<void>;
  updateNotifications: (data: UpdateNotificationsRequest) => Promise<void>;
  updatePreferences: (data: UpdatePreferencesRequest) => Promise<void>;
  
  // ê³„ì • ê´€ë¦¬
  connectAccount: (provider: string) => Promise<void>;
  disconnectAccount: (provider: string) => Promise<void>;
  exportData: () => Promise<string>;
  deleteAccount: (data: DeleteAccountRequest) => Promise<void>;
  cancelDeletion: (token: string) => Promise<void>;
  
  // ìœ í‹¸ë¦¬í‹°
  setActiveTab: (tab: string) => void;
  markAsChanged: () => void;
  resetChanges: () => void;
  reset: () => void;
}
```

## í”„ë¡œí•„ ì‚¬ì§„ ì—…ë¡œë“œ

### ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° í¬ë¡­
```typescript
const ProfileImageUpload: React.FC<{
  currentImage?: string;
  onUpdate: (imageUrl: string) => Promise<void>;
}> = ({ currentImage, onUpdate }) => {
  const [isUploading, setIsUploading] = useState(false);
  const [previewImage, setPreviewImage] = useState<string>();
  const [showCropper, setShowCropper] = useState(false);
  
  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file) return;
    
    // íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬
    if (file.size > 5 * 1024 * 1024) {
      toast.error('ì´ë¯¸ì§€ í¬ê¸°ëŠ” 5MB ì´í•˜ë¡œ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”');
      return;
    }
    
    if (!file.type.startsWith('image/')) {
      toast.error('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤');
      return;
    }
    
    // ë¯¸ë¦¬ë³´ê¸° ìƒì„±
    const reader = new FileReader();
    reader.onload = () => {
      setPreviewImage(reader.result as string);
      setShowCropper(true);
    };
    reader.readAsDataURL(file);
  };
  
  const handleCropComplete = async (croppedImage: Blob) => {
    setIsUploading(true);
    try {
      // ë°±ì—”ë“œ ì•„ë°”íƒ€ ì—…ë¡œë“œ API í˜¸ì¶œ (ë¡œì»¬ íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©)
      const formData = new FormData();
      formData.append('image', croppedImage, 'avatar.webp');
      formData.append('width', '400');
      formData.append('height', '400');

      const response = await fetch(`/api/users/${user.userid}/avatar`, {
        method: 'POST',
        body: formData,
      });

      const data = await response.json();

      if (data.profileImage) {
        await onUpdate(data.profileImage);
        toast.success('í”„ë¡œí•„ ì‚¬ì§„ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    } catch (error) {
      toast.error('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    } finally {
      setIsUploading(false);
      setShowCropper(false);
      setPreviewImage(undefined);
    }
  };
  
  return (
    <div className="space-y-4">
      <div className="flex items-center space-x-4">
        <div className="w-20 h-20 rounded-full overflow-hidden bg-gray-200">
          {currentImage ? (
            <img src={currentImage} alt="í”„ë¡œí•„" className="w-full h-full object-cover" />
          ) : (
            <div className="w-full h-full flex items-center justify-center text-gray-500">
              <UserIcon className="w-8 h-8" />
            </div>
          )}
        </div>
        
        <div className="space-y-2">
          <input
            type="file"
            accept="image/*"
            onChange={handleFileSelect}
            className="hidden"
            id="profile-image-input"
          />
          <label
            htmlFor="profile-image-input"
            className="inline-block px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700"
          >
            {currentImage ? 'ì‚¬ì§„ ë³€ê²½' : 'ì‚¬ì§„ ì—…ë¡œë“œ'}
          </label>
          {currentImage && (
            <button
              onClick={() => onUpdate('')}
              className="block text-red-600 hover:text-red-800"
            >
              ì‚¬ì§„ ì‚­ì œ
            </button>
          )}
        </div>
      </div>
      
      {showCropper && previewImage && (
        <ImageCropperModal
          image={previewImage}
          isOpen={showCropper}
          onClose={() => setShowCropper(false)}
          onCropComplete={handleCropComplete}
          isLoading={isUploading}
        />
      )}
    </div>
  );
};
```

## ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹œìŠ¤í…œ

### ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ê²€ì¦
```typescript
interface PasswordStrength {
  score: number; // 0-4
  feedback: string[];
  isValid: boolean;
}

const validatePasswordStrength = (password: string): PasswordStrength => {
  let score = 0;
  const feedback: string[] = [];
  
  // ê¸¸ì´ ê²€ì¦
  if (password.length >= 8) {
    score += 1;
  } else {
    feedback.push('ìµœì†Œ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”');
  }
  
  // ëŒ€ì†Œë¬¸ì ê²€ì¦
  if (/[a-z]/.test(password) && /[A-Z]/.test(password)) {
    score += 1;
  } else {
    feedback.push('ëŒ€ë¬¸ìì™€ ì†Œë¬¸ìë¥¼ ëª¨ë‘ í¬í•¨í•´ì£¼ì„¸ìš”');
  }
  
  // ìˆ«ì ê²€ì¦
  if (/\d/.test(password)) {
    score += 1;
  } else {
    feedback.push('ìˆ«ìë¥¼ í¬í•¨í•´ì£¼ì„¸ìš”');
  }
  
  // íŠ¹ìˆ˜ë¬¸ì ê²€ì¦
  if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
    score += 1;
  } else {
    feedback.push('íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì£¼ì„¸ìš”');
  }
  
  return {
    score,
    feedback,
    isValid: score >= 3
  };
};

const PasswordChangeForm: React.FC<{
  onSubmit: (data: UpdatePasswordRequest) => Promise<void>;
}> = ({ onSubmit }) => {
  const [formData, setFormData] = useState({
    currentPassword: '',
    newPassword: '',
    confirmPassword: ''
  });
  const [showPasswords, setShowPasswords] = useState({
    current: false,
    new: false,
    confirm: false
  });
  const [isSubmitting, setIsSubmitting] = useState(false);
  
  const newPasswordStrength = useMemo(
    () => validatePasswordStrength(formData.newPassword),
    [formData.newPassword]
  );
  
  const passwordsMatch = formData.newPassword === formData.confirmPassword;
  const canSubmit = formData.currentPassword.length > 0 &&
                   newPasswordStrength.isValid &&
                   passwordsMatch;
  
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!canSubmit) return;
    
    setIsSubmitting(true);
    try {
      await onSubmit(formData);
      setFormData({ currentPassword: '', newPassword: '', confirmPassword: '' });
      toast.success('ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
    } catch (error: any) {
      toast.error(error.message || 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    } finally {
      setIsSubmitting(false);
    }
  };
  
  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      {/* í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          í˜„ì¬ ë¹„ë°€ë²ˆí˜¸
        </label>
        <div className="relative">
          <input
            type={showPasswords.current ? 'text' : 'password'}
            value={formData.currentPassword}
            onChange={(e) => setFormData({
              ...formData,
              currentPassword: e.target.value
            })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-12"
            required
          />
          <button
            type="button"
            onClick={() => setShowPasswords({
              ...showPasswords,
              current: !showPasswords.current
            })}
            className="absolute right-3 top-2.5 text-gray-500 hover:text-gray-700"
          >
            {showPasswords.current ? <EyeOffIcon className="w-5 h-5" /> : <EyeIcon className="w-5 h-5" />}
          </button>
        </div>
      </div>
      
      {/* ìƒˆ ë¹„ë°€ë²ˆí˜¸ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ìƒˆ ë¹„ë°€ë²ˆí˜¸
        </label>
        <div className="relative">
          <input
            type={showPasswords.new ? 'text' : 'password'}
            value={formData.newPassword}
            onChange={(e) => setFormData({
              ...formData,
              newPassword: e.target.value
            })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-12"
            required
          />
          <button
            type="button"
            onClick={() => setShowPasswords({
              ...showPasswords,
              new: !showPasswords.new
            })}
            className="absolute right-3 top-2.5 text-gray-500 hover:text-gray-700"
          >
            {showPasswords.new ? <EyeOffIcon className="w-5 h-5" /> : <EyeIcon className="w-5 h-5" />}
          </button>
        </div>
        
        {/* ë¹„ë°€ë²ˆí˜¸ ê°•ë„ í‘œì‹œ */}
        {formData.newPassword.length > 0 && (
          <div className="mt-2">
            <div className="flex items-center space-x-2">
              <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full transition-all duration-300 ${
                    newPasswordStrength.score <= 1 ? 'bg-red-500 w-1/4' :
                    newPasswordStrength.score === 2 ? 'bg-yellow-500 w-2/4' :
                    newPasswordStrength.score === 3 ? 'bg-blue-500 w-3/4' :
                    'bg-green-500 w-full'
                  }`}
                />
              </div>
              <span className="text-xs text-gray-600">
                {['ë§¤ìš° ì•½í•¨', 'ì•½í•¨', 'ë³´í†µ', 'ê°•í•¨', 'ë§¤ìš° ê°•í•¨'][newPasswordStrength.score]}
              </span>
            </div>
            
            {newPasswordStrength.feedback.length > 0 && (
              <ul className="mt-2 text-xs text-gray-600 space-y-1">
                {newPasswordStrength.feedback.map((feedback, index) => (
                  <li key={index} className="flex items-center">
                    <XMarkIcon className="w-3 h-3 text-red-500 mr-1" />
                    {feedback}
                  </li>
                ))}
              </ul>
            )}
          </div>
        )}
      </div>
      
      {/* ë¹„ë°€ë²ˆí˜¸ í™•ì¸ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸
        </label>
        <div className="relative">
          <input
            type={showPasswords.confirm ? 'text' : 'password'}
            value={formData.confirmPassword}
            onChange={(e) => setFormData({
              ...formData,
              confirmPassword: e.target.value
            })}
            className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-12 ${
              formData.confirmPassword.length > 0 && !passwordsMatch 
                ? 'border-red-300' 
                : 'border-gray-300'
            }`}
            required
          />
          <button
            type="button"
            onClick={() => setShowPasswords({
              ...showPasswords,
              confirm: !showPasswords.confirm
            })}
            className="absolute right-3 top-2.5 text-gray-500 hover:text-gray-700"
          >
            {showPasswords.confirm ? <EyeOffIcon className="w-5 h-5" /> : <EyeIcon className="w-5 h-5" />}
          </button>
        </div>
        
        {formData.confirmPassword.length > 0 && !passwordsMatch && (
          <p className="mt-1 text-xs text-red-600">
            ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
          </p>
        )}
      </div>
      
      <button
        type="submit"
        disabled={!canSubmit || isSubmitting}
        className="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"
      >
        {isSubmitting ? 'ë³€ê²½ ì¤‘...' : 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½'}
      </button>
    </form>
  );
};
```

## í…Œë§ˆ ì‹œìŠ¤í…œ

### ë‹¤í¬ ëª¨ë“œ êµ¬í˜„
```typescript
const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [theme, setTheme] = useLocalStorage<'light' | 'dark' | 'auto'>('theme', 'auto');
  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>('light');
  
  useEffect(() => {
    if (theme === 'auto') {
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      setResolvedTheme(mediaQuery.matches ? 'dark' : 'light');
      
      const handleChange = (e: MediaQueryListEvent) => {
        setResolvedTheme(e.matches ? 'dark' : 'light');
      };
      
      mediaQuery.addEventListener('change', handleChange);
      return () => mediaQuery.removeEventListener('change', handleChange);
    } else {
      setResolvedTheme(theme);
    }
  }, [theme]);
  
  useEffect(() => {
    document.documentElement.classList.toggle('dark', resolvedTheme === 'dark');
  }, [resolvedTheme]);
  
  return (
    <ThemeContext.Provider value={{ theme, setTheme, resolvedTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

const ThemeSelector: React.FC<{
  value: 'light' | 'dark' | 'auto';
  onChange: (theme: 'light' | 'dark' | 'auto') => void;
}> = ({ value, onChange }) => {
  const options = [
    { value: 'light', label: 'ë¼ì´íŠ¸', icon: SunIcon },
    { value: 'dark', label: 'ë‹¤í¬', icon: MoonIcon },
    { value: 'auto', label: 'ì‹œìŠ¤í…œ ì„¤ì •', icon: ComputerDesktopIcon },
  ];
  
  return (
    <div className="space-y-2">
      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300">
        í…Œë§ˆ
      </label>
      <div className="grid grid-cols-3 gap-2">
        {options.map(({ value: optionValue, label, icon: Icon }) => (
          <button
            key={optionValue}
            onClick={() => onChange(optionValue as any)}
            className={`p-3 rounded-lg border-2 transition-colors ${
              value === optionValue
                ? 'border-blue-500 bg-blue-50 dark:bg-blue-900'
                : 'border-gray-300 hover:border-gray-400 dark:border-gray-600'
            }`}
          >
            <Icon className="w-6 h-6 mx-auto mb-1" />
            <span className="text-xs font-medium">{label}</span>
          </button>
        ))}
      </div>
    </div>
  );
};
```

## ë°ì´í„° ë‚´ë³´ë‚´ê¸°

### ê°œì¸ ë°ì´í„° ë‚´ë³´ë‚´ê¸°
```typescript
const DataExportSection: React.FC<{
  onExport: () => Promise<string>;
}> = ({ onExport }) => {
  const [isExporting, setIsExporting] = useState(false);
  const [lastExport, setLastExport] = useState<Date | null>(null);
  
  const handleExport = async () => {
    setIsExporting(true);
    try {
      const downloadUrl = await onExport();
      
      // ìë™ ë‹¤ìš´ë¡œë“œ ì‹œì‘
      const link = document.createElement('a');
      link.href = downloadUrl;
      link.download = `readzone-data-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      setLastExport(new Date());
      toast.success('ë°ì´í„° ë‚´ë³´ë‚´ê¸°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤');
    } catch (error) {
      toast.error('ë°ì´í„° ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    } finally {
      setIsExporting(false);
    }
  };
  
  return (
    <div className="border border-gray-300 rounded-lg p-4">
      <h3 className="text-lg font-medium mb-2">ê°œì¸ ë°ì´í„° ë‹¤ìš´ë¡œë“œ</h3>
      <p className="text-gray-600 text-sm mb-4">
        íšŒì›ë‹˜ì˜ ëª¨ë“  ë°ì´í„°(ë…í›„ê°, ëŒ“ê¸€, í”„ë¡œí•„ ì •ë³´ ë“±)ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        ë‹¤ìš´ë¡œë“œ ë§í¬ëŠ” 24ì‹œê°„ ë™ì•ˆ ìœ íš¨í•©ë‹ˆë‹¤.
      </p>
      
      {lastExport && (
        <p className="text-xs text-gray-500 mb-4">
          ë§ˆì§€ë§‰ ë‚´ë³´ë‚´ê¸°: {lastExport.toLocaleString()}
        </p>
      )}
      
      <button
        onClick={handleExport}
        disabled={isExporting}
        className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400"
      >
        {isExporting ? 'ë‚´ë³´ë‚´ëŠ” ì¤‘...' : 'ë°ì´í„° ë‹¤ìš´ë¡œë“œ'}
      </button>
    </div>
  );
};
```

## ì—ëŸ¬ ì²˜ë¦¬

### ì„¤ì • ë³€ê²½ ì‹¤íŒ¨ ì²˜ë¦¬
```typescript
const handleSettingsError = (error: any) => {
  if (error.status === 400) {
    // ìœ íš¨ì„± ê²€ì¦ ì˜¤ë¥˜
    if (error.errors) {
      error.errors.forEach((err: any) => {
        toast.error(`${err.field}: ${err.message}`);
      });
    } else {
      toast.error(error.message || 'ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”');
    }
  } else if (error.status === 409) {
    // ì¤‘ë³µ ì˜¤ë¥˜ (ë‹‰ë„¤ì„, ì´ë©”ì¼)
    toast.error('ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì •ë³´ì…ë‹ˆë‹¤');
  } else if (error.status === 429) {
    // ë„ˆë¬´ ë§ì€ ìš”ì²­
    toast.error('ë„ˆë¬´ ë§ì€ ìš”ì²­ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”');
  } else {
    // ê¸°íƒ€ ì„œë²„ ì˜¤ë¥˜
    toast.error('ì„¤ì • ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”');
  }
};
```

## ì ‘ê·¼ì„±

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
```typescript
// ì„¤ì • íƒ­ ê°„ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
const useSettingsKeyboardNavigation = (tabs: string[], activeTab: string, onTabChange: (tab: string) => void) => {
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.target && (e.target as HTMLElement).closest('[role="tablist"]')) {
        const currentIndex = tabs.indexOf(activeTab);
        
        switch (e.key) {
          case 'ArrowRight':
          case 'ArrowDown':
            e.preventDefault();
            const nextIndex = (currentIndex + 1) % tabs.length;
            onTabChange(tabs[nextIndex]);
            break;
            
          case 'ArrowLeft':
          case 'ArrowUp':
            e.preventDefault();
            const prevIndex = (currentIndex - 1 + tabs.length) % tabs.length;
            onTabChange(tabs[prevIndex]);
            break;
            
          case 'Home':
            e.preventDefault();
            onTabChange(tabs[0]);
            break;
            
          case 'End':
            e.preventDefault();
            onTabChange(tabs[tabs.length - 1]);
            break;
        }
      }
    };
    
    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [tabs, activeTab, onTabChange]);
};

// ARIA ë¼ë²¨ë§
<nav role="tablist" aria-label="ì„¤ì • ë©”ë‰´">
  {tabs.map(tab => (
    <button
      key={tab.id}
      role="tab"
      aria-selected={activeTab === tab.id}
      aria-controls={`${tab.id}-panel`}
      id={`${tab.id}-tab`}
      onClick={() => onTabChange(tab.id)}
    >
      {tab.label}
    </button>
  ))}
</nav>

<div
  role="tabpanel"
  id={`${activeTab}-panel`}
  aria-labelledby={`${activeTab}-tab`}
>
  {/* ì„¤ì • ì½˜í…ì¸  */}
</div>
```

## ì„±ëŠ¥ ëª©í‘œ

### Core Web Vitals
- **LCP**: < 2.5ì´ˆ (ì„¤ì • í˜ì´ì§€ ë¡œë”©)
- **FID**: < 100ms (ì„¤ì • ë³€ê²½ ì‘ë‹µì„±)
- **CLS**: < 0.1 (íƒ­ ì „í™˜ ì‹œ ë ˆì´ì•„ì›ƒ ì•ˆì •ì„±)

### ì‚¬ìš©ì ê²½í—˜ ì§€í‘œ
- ì„¤ì • ë¡œë”©: < 1.5ì´ˆ
- ì„¤ì • ì €ì¥ ì‘ë‹µ: < 1ì´ˆ
- íƒ­ ì „í™˜: < 200ms
- ì´ë¯¸ì§€ ì—…ë¡œë“œ: < 3ì´ˆ
