# 09. ë„ì„œ ìƒì„¸ í˜ì´ì§€ êµ¬í˜„ ìš”êµ¬ì‚¬í•­

## í˜ì´ì§€ ì •ë³´
- **ê²½ë¡œ**: `/books/[id]`
- **ìš°ì„ ìˆœìœ„**: 3ìˆœìœ„ (Enhanced Features)
- **ì„¤ëª…**: ë„ì„œ ì •ë³´, ê´€ë ¨ ë…í›„ê° ëª©ë¡, ë„ì„œ í†µê³„
- **ì¸ì¦**: ë¹„ë¡œê·¸ì¸ ì ‘ê·¼ ê°€ëŠ¥, ìƒí˜¸ì‘ìš© ì‹œ ë¡œê·¸ì¸ í•„ìš”

## ğŸ“‹ ì°¸ì¡° ë¬¸ì„œ

### ì‚¬ìš©ì í”Œë¡œìš°
- **[ë„ì„œ íƒìƒ‰ ë° ê²€ìƒ‰](../user-flows/discovery.md)** - ë„ì„œ ìƒì„¸ ì§„ì…, ì¤‘ë³µ ì‘ì„± ì„ íƒ
- **[ë…í›„ê° ì‘ì„±](../user-flows/content-creation.md)** - ë„ì„œ ì„ íƒ í›„ ë…í›„ê° ì‘ì„±
- **[ì†Œì…œ ìƒí˜¸ì‘ìš©](../user-flows/social-interaction.md)** - ì•ˆì „í•œ êµ¬ë§¤ ì—°ê²°

### í”„ë¡œì íŠ¸ êµ¬ì¡°
- **[êµ¬í˜„ í˜ì´ì§€ ëª©ë¡](../implementation-pages.md)** - ë„ì„œ ìƒì„¸ì˜ ì •ë³´ íƒìƒ‰ ì²´ì¸
- **[ì‚¬ìš©ì íë¦„ë„ ê°œìš”](../user-flows.md)** - ë„ì„œ íƒìƒ‰ ë° ë°œê²¬ íë¦„

### ê´€ë ¨ PRD ë¬¸ì„œ
- **[ë„ì„œ ê²€ìƒ‰ í˜ì´ì§€](./06-search.md)** - ê²€ìƒ‰ì—ì„œ ë„ì„œ ìƒì„¸ë¡œ ì§„ì…
- **[ë…í›„ê° ì‘ì„± í˜ì´ì§€](./04-write.md)** - ë„ì„œ ìƒì„¸ì—ì„œ ë…í›„ê° ì‘ì„±
- **[ë…í›„ê° ìƒì„¸ í˜ì´ì§€](./05-review-detail.md)** - ë„ì„œ ìƒì„¸ì—ì„œ ë…í›„ê° ìƒì„¸ë¡œ ì—°ê²°
- **[ë©”ì¸ í”¼ë“œ í˜ì´ì§€](./01-main-feed.md)** - ë„ì„œ ì •ë³´ í´ë¦­ ì§„ì…ì 

## í•µì‹¬ ê¸°ëŠ¥

### 1. ë„ì„œ ì •ë³´ í‘œì‹œ
- **ê¸°ë³¸ ì •ë³´**: í‘œì§€, ì œëª©, ì €ì, ì¶œíŒì‚¬, ì¶œê°„ë…„ë„, ISBN
- **ìƒì„¸ ì •ë³´**: ì¤„ê±°ë¦¬, ì¥ë¥´, í˜ì´ì§€ ìˆ˜, ì–¸ì–´
- **ì™¸ë¶€ ë§í¬**: ë„ì„œ êµ¬ë§¤ ë§í¬ (ì•Œë¼ë”˜, êµë³´ë¬¸ê³ , ì˜ˆìŠ¤24, ì¸í„°íŒŒí¬)
- **ë©”íƒ€ë°ì´í„°**: ì¶”ê°€ì¼, ë§ˆì§€ë§‰ ë…í›„ê° ì‘ì„±ì¼

### 2. ë…í›„ê° í†µê³„ ë° ë¶„ì„
- **ì „ì²´ í†µê³„**: ë…í›„ê° ìˆ˜, í‰ê·  í‰ì , ìµœê·¼ í™œë™
- **í‰ì  ë¶„í¬**: ì¶”ì²œ/ë¹„ì¶”ì²œ ë¹„ìœ¨ ì‹œê°í™”
- **íƒœê·¸ í´ë¼ìš°ë“œ**: ìì£¼ ì‚¬ìš©ëœ íƒœê·¸ë“¤
- **ì½ê¸° ê²½í–¥**: ì›”ë³„ ë…í›„ê° ì‘ì„± ì¶”ì´

### 3. ê´€ë ¨ ë…í›„ê° ëª©ë¡
- **ì •ë ¬ ì˜µì…˜**: ìµœì‹ ìˆœ, ì¸ê¸°ìˆœ, í‰ì ìˆœ
- **í•„í„°ë§**: ì¶”ì²œ/ë¹„ì¶”ì²œ, ê¸°ê°„, íƒœê·¸
- **ë¬´í•œ ìŠ¤í¬ë¡¤**: í˜ì´ì§€ë‹¹ 20ê°œ ë¡œë”©
- **ë¯¸ë¦¬ë³´ê¸°**: ë…í›„ê° ìš”ì•½ (150ì)

### 4. ìƒí˜¸ì‘ìš© ê¸°ëŠ¥
- **ë…í›„ê° ì“°ê¸°**: í•´ë‹¹ ë„ì„œì— ëŒ€í•œ ë…í›„ê° ì‘ì„±
- **ì„œì¬ ì¶”ê°€**: ì½ê³  ì‹¶ì€ ì±…, ì½ëŠ” ì¤‘, ì½ì€ ì±… ìƒíƒœ ê´€ë¦¬
- **ì•Œë¦¼ ì„¤ì •**: ìƒˆë¡œìš´ ë…í›„ê° ì•Œë¦¼ êµ¬ë…
- **ê³µìœ  ê¸°ëŠ¥**: ë„ì„œ ì •ë³´ ê³µìœ 

## í•„ìš”í•œ API

### GET `/api/books/[id]`
```typescript
interface BookDetailRequest {
  id: string;
  includeStats?: boolean;
  includeReviews?: boolean;
}

interface BookDetailResponse {
  book: {
    id: string;
    title: string;
    author: string;
    publisher: string;
    publishedDate: string;
    isbn?: string;
    coverImage?: string;
    description?: string;
    genre: string[];
    language: string;
    pages?: number;
    
    // ë©”íƒ€ë°ì´í„°
    addedAt: string;
    lastReviewAt?: string;
    source: 'db' | 'api'; // ë°ì´í„° ì¶œì²˜
    
    // ì™¸ë¶€ ë§í¬
    externalLinks: {
      aladin?: string;
      kyobo?: string;
      yes24?: string;
      interpark?: string;
    };
  };
  
  stats: {
    reviewCount: number;
    averageRating: number; // 0-100 (ì¶”ì²œ ë¹„ìœ¨)
    ratingsDistribution: {
      recommend: number;
      not_recommend: number;
    };
    recentActivity: {
      thisWeek: number;
      thisMonth: number;
      thisYear: number;
    };
    topTags: Array<{
      tag: string;
      count: number;
    }>;
  };
  
  userStatus?: {
    hasReviewed: boolean;
    reviewId?: string;
    libraryStatus?: 'want_to_read' | 'reading' | 'read';
    isSubscribed?: boolean; // ì•Œë¦¼ êµ¬ë… ì—¬ë¶€
  }; // ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ
  
  similarBooks?: Array<{
    id: string;
    title: string;
    author: string;
    coverImage?: string;
    reviewCount: number;
    averageRating: number;
  }>;
}
```

### GET `/api/books/[id]/reviews`
```typescript
interface BookReviewsRequest {
  bookId: string;
  sort?: 'newest' | 'oldest' | 'popular' | 'rating';
  filter?: {
    rating?: 'recommend' | 'not_recommend';
    tags?: string[];
    dateRange?: {
      from?: string;
      to?: string;
    };
  };
  cursor?: string;
  limit?: number;
}

interface BookReviewsResponse {
  reviews: Array<{
    id: string;
    content: string; // ë¯¸ë¦¬ë³´ê¸° 150ì
    rating: 'recommend' | 'not_recommend';
    tags: string[];
    createdAt: string;
    
    author: {
      id: string;
      username: string;
      profileImage?: string;
    };
    
    stats: {
      likes: number;
      comments: number;
      shares: number;
    };
    
    userInteraction?: {
      isLiked: boolean;
    }; // ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ
  }>;
  
  pagination: {
    nextCursor?: string;
    hasMore: boolean;
    total: number;
  };
  
  facets: {
    ratings: {
      recommend: number;
      not_recommend: number;
    };
    tags: Array<{
      tag: string;
      count: number;
    }>;
  };
}
```

### GET `/api/books/[id]/stats`
```typescript
interface BookStatsRequest {
  bookId: string;
  period?: 'week' | 'month' | 'year' | 'all';
}

interface BookStatsResponse {
  timeline: Array<{
    date: string; // YYYY-MM-DD
    reviewCount: number;
    averageRating: number;
  }>;
  
  demographics: {
    ageGroups?: Array<{
      range: string; // "20-29"
      count: number;
      avgRating: number;
    }>;
    genderDistribution?: {
      male: number;
      female: number;
      other: number;
    };
  };
  
  readingPatterns: {
    avgReadingTime?: number; // ì¼
    popularReadingMonths: Array<{
      month: number; // 1-12
      count: number;
    }>;
    rereadRate: number; // ì¬ë…ë¥  %
  };
}
```

### POST `/api/books/[id]/library`
```typescript
interface AddToLibraryRequest {
  status: 'want_to_read' | 'reading' | 'read';
  startDate?: string; // ì½ê¸° ì‹œì‘ì¼
  finishDate?: string; // ì½ê¸° ì™„ë£Œì¼
  notes?: string; // ê°œì¸ ë©”ëª¨
}

interface AddToLibraryResponse {
  success: boolean;
  libraryStatus: string;
  message: string;
}
```

### POST `/api/books/[id]/subscribe`
```typescript
interface SubscribeBookRequest {
  action: 'subscribe' | 'unsubscribe';
}

interface SubscribeBookResponse {
  success: boolean;
  isSubscribed: boolean;
  message: string;
}
```

### POST `/api/books/[id]/share`
```typescript
interface ShareBookRequest {
  platform: 'link' | 'kakao' | 'twitter';
}

interface ShareBookResponse {
  success: boolean;
  shareUrl: string;
  shareCount: number;
}
```

### GET `/api/books/similar/[id]`
```typescript
interface SimilarBooksRequest {
  bookId: string;
  limit?: number;
  method?: 'genre' | 'author' | 'collaborative'; // ìœ ì‚¬ë„ ê³„ì‚° ë°©ì‹
}

interface SimilarBooksResponse {
  books: Array<{
    id: string;
    title: string;
    author: string;
    coverImage?: string;
    similarity: number; // 0-100
    reason: 'same_author' | 'same_genre' | 'similar_tags' | 'user_behavior';
    
    stats: {
      reviewCount: number;
      averageRating: number;
    };
  }>;
}
```

## ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 1. BookDetailPage (ë©”ì¸ ì»´í¬ë„ŒíŠ¸)
```typescript
interface BookDetailPageProps {
  bookId: string;
  initialData?: BookDetailResponse;
}

// ìƒíƒœ ê´€ë¦¬
- book: BookDetail | null
- reviews: BookReview[]
- reviewsFilter: ReviewsFilter
- reviewsSort: string
- isLoading: boolean
- activeTab: 'reviews' | 'stats' | 'similar'
```

### 2. BookHeader (ë„ì„œ ì •ë³´ í—¤ë”)
```typescript
interface BookHeaderProps {
  book: BookDetail;
  stats: BookStats;
  userStatus?: UserBookStatus;
  onWriteReview: () => void;
  onAddToLibrary: (status: string) => Promise<void>;
  onSubscribe: () => Promise<void>;
  onShare: (platform: string) => Promise<void>;
}

// í•˜ìœ„ ì»´í¬ë„ŒíŠ¸
- BookCover: ë„ì„œ í‘œì§€ (í™•ëŒ€ ê°€ëŠ¥)
- BookInfo: ê¸°ë³¸ ì •ë³´ (ì œëª©, ì €ì, ì¶œíŒì‚¬ ë“±)
- BookDescription: ì¤„ê±°ë¦¬
- ActionButtons: ë…í›„ê° ì“°ê¸°, ì„œì¬ ì¶”ê°€, ì•Œë¦¼, ê³µìœ 
- ExternalLinks: ì™¸ë¶€ ë„ì„œ êµ¬ë§¤ ë§í¬
```

### 3. BookStats (ë„ì„œ í†µê³„)
```typescript
interface BookStatsProps {
  stats: BookStats;
  timeline?: BookTimeline[];
  isLoading: boolean;
}

// í†µê³„ ì»´í¬ë„ŒíŠ¸
- RatingDistribution: í‰ì  ë¶„í¬ ì°¨íŠ¸
- TagCloud: íƒœê·¸ í´ë¼ìš°ë“œ
- ActivityTimeline: í™œë™ íƒ€ì„ë¼ì¸
- ReadingPatterns: ì½ê¸° íŒ¨í„´ ë¶„ì„
```

### 4. BookReviewsList (ë…í›„ê° ëª©ë¡)
```typescript
interface BookReviewsListProps {
  bookId: string;
  reviews: BookReview[];
  sort: string;
  filter: ReviewsFilter;
  facets: ReviewsFacets;
  hasMore: boolean;
  isLoading: boolean;
  onSortChange: (sort: string) => void;
  onFilterChange: (filter: ReviewsFilter) => void;
  onLoadMore: () => void;
}

// í•˜ìœ„ ì»´í¬ë„ŒíŠ¸
- ReviewsFilters: í•„í„°ë§ ì˜µì…˜
- ReviewsSorting: ì •ë ¬ ì˜µì…˜
- ReviewCard: ê°œë³„ ë…í›„ê° ì¹´ë“œ
- LoadMoreButton: ë” ë³´ê¸° ë²„íŠ¼
```

### 5. SimilarBooks (ìœ ì‚¬í•œ ë„ì„œ)
```typescript
interface SimilarBooksProps {
  bookId: string;
  books: SimilarBook[];
  onBookClick: (bookId: string) => void;
}

// í‘œì‹œ ì •ë³´
- ìœ ì‚¬ë„ ì ìˆ˜
- ìœ ì‚¬í•œ ì´ìœ 
- ê¸°ë³¸ í†µê³„ (ë…í›„ê° ìˆ˜, í‰ì )
```

### 6. LibraryStatusSelector (ì„œì¬ ìƒíƒœ ì„ íƒ)
```typescript
interface LibraryStatusSelectorProps {
  currentStatus?: string;
  onStatusChange: (status: string, metadata?: any) => Promise<void>;
  isLoading: boolean;
}

// ìƒíƒœ ì˜µì…˜
- want_to_read: ì½ê³  ì‹¶ì€ ì±…
- reading: ì½ëŠ” ì¤‘ (ì‹œì‘ì¼ ì…ë ¥)
- read: ì½ì€ ì±… (ì™„ë£Œì¼ ì…ë ¥)
- remove: ì„œì¬ì—ì„œ ì œê±°
```

## ìƒíƒœ ê´€ë¦¬ (Zustand)

### BookDetailStore
```typescript
interface BookDetailState {
  // ìƒíƒœ
  book: BookDetail | null;
  stats: BookStats | null;
  reviews: BookReview[];
  reviewsTotal: number;
  reviewsFilter: ReviewsFilter;
  reviewsSort: string;
  similarBooks: SimilarBook[];
  
  // UI ìƒíƒœ
  activeTab: string;
  isLoading: boolean;
  reviewsLoading: boolean;
  error: string | null;
  
  // ì•¡ì…˜
  loadBook: (id: string) => Promise<void>;
  loadBookStats: (id: string, period?: string) => Promise<void>;
  loadReviews: (bookId: string, options?: BookReviewsRequest) => Promise<void>;
  loadSimilarBooks: (bookId: string) => Promise<void>;
  
  // ìƒí˜¸ì‘ìš©
  addToLibrary: (bookId: string, status: string, metadata?: any) => Promise<void>;
  subscribeToBook: (bookId: string) => Promise<void>;
  shareBook: (bookId: string, platform: string) => Promise<void>;
  
  // í•„í„°ë§ ë° ì •ë ¬
  setReviewsSort: (sort: string) => void;
  setReviewsFilter: (filter: ReviewsFilter) => void;
  loadMoreReviews: () => Promise<void>;
  
  // ìœ í‹¸ë¦¬í‹°
  setActiveTab: (tab: string) => void;
  reset: () => void;
  updateUserStatus: (status: Partial<UserBookStatus>) => void;
}
```

## ë„ì„œ í†µê³„ ì‹œê°í™”

### í‰ì  ë¶„í¬ ì°¨íŠ¸
```typescript
const RatingDistribution: React.FC<{
  distribution: { recommend: number; not_recommend: number };
}> = ({ distribution }) => {
  const total = distribution.recommend + distribution.not_recommend;
  const recommendPercent = total > 0 ? (distribution.recommend / total) * 100 : 0;
  const notRecommendPercent = 100 - recommendPercent;
  
  return (
    <div className="space-y-4">
      <h3 className="text-lg font-semibold">ë…ì í‰ê°€</h3>
      
      <div className="space-y-3">
        <div className="flex items-center space-x-3">
          <span className="flex items-center text-green-600">
            <ThumbUpIcon className="w-4 h-4 mr-1" />
            ì¶”ì²œ
          </span>
          <div className="flex-1 h-3 bg-gray-200 rounded-full overflow-hidden">
            <div 
              className="h-full bg-green-500 transition-all duration-300"
              style={{ width: `${recommendPercent}%` }}
            />
          </div>
          <span className="text-sm font-medium">
            {distribution.recommend}ëª… ({recommendPercent.toFixed(1)}%)
          </span>
        </div>
        
        <div className="flex items-center space-x-3">
          <span className="flex items-center text-red-600">
            <ThumbDownIcon className="w-4 h-4 mr-1" />
            ë¹„ì¶”ì²œ
          </span>
          <div className="flex-1 h-3 bg-gray-200 rounded-full overflow-hidden">
            <div 
              className="h-full bg-red-500 transition-all duration-300"
              style={{ width: `${notRecommendPercent}%` }}
            />
          </div>
          <span className="text-sm font-medium">
            {distribution.not_recommend}ëª… ({notRecommendPercent.toFixed(1)}%)
          </span>
        </div>
      </div>
      
      <div className="text-center p-4 bg-gray-50 rounded-lg">
        <span className="text-2xl font-bold text-green-600">
          {recommendPercent.toFixed(1)}%
        </span>
        <p className="text-sm text-gray-600">ë…ì ì¶”ì²œë¥ </p>
      </div>
    </div>
  );
};
```

### íƒœê·¸ í´ë¼ìš°ë“œ
```typescript
const TagCloud: React.FC<{
  tags: Array<{ tag: string; count: number }>;
  onTagClick: (tag: string) => void;
}> = ({ tags, onTagClick }) => {
  const maxCount = Math.max(...tags.map(t => t.count));
  
  const getFontSize = (count: number) => {
    const ratio = count / maxCount;
    return 12 + ratio * 12; // 12px ~ 24px
  };
  
  const getOpacity = (count: number) => {
    const ratio = count / maxCount;
    return 0.6 + ratio * 0.4; // 0.6 ~ 1.0
  };
  
  return (
    <div className="space-y-4">
      <h3 className="text-lg font-semibold">ì¸ê¸° íƒœê·¸</h3>
      
      <div className="flex flex-wrap gap-2">
        {tags.map(({ tag, count }) => (
          <button
            key={tag}
            onClick={() => onTagClick(tag)}
            className="inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors"
            style={{
              fontSize: `${getFontSize(count)}px`,
              opacity: getOpacity(count)
            }}
          >
            #{tag}
            <span className="ml-1 text-xs">({count})</span>
          </button>
        ))}
      </div>
      
      {tags.length === 0 && (
        <p className="text-gray-500 text-center py-8">
          ì•„ì§ íƒœê·¸ê°€ ì—†ìŠµë‹ˆë‹¤
        </p>
      )}
    </div>
  );
};
```

### í™œë™ íƒ€ì„ë¼ì¸
```typescript
const ActivityTimeline: React.FC<{
  timeline: Array<{ date: string; reviewCount: number; averageRating: number }>;
}> = ({ timeline }) => {
  const maxReviews = Math.max(...timeline.map(t => t.reviewCount));
  
  return (
    <div className="space-y-4">
      <h3 className="text-lg font-semibold">ìµœê·¼ 6ê°œì›” í™œë™</h3>
      
      <div className="space-y-3">
        {timeline.map(({ date, reviewCount, averageRating }) => {
          const month = new Date(date).toLocaleDateString('ko-KR', { 
            year: 'numeric', 
            month: 'long' 
          });
          const barWidth = maxReviews > 0 ? (reviewCount / maxReviews) * 100 : 0;
          
          return (
            <div key={date} className="flex items-center space-x-3">
              <div className="w-20 text-sm text-gray-600 text-right">
                {month}
              </div>
              
              <div className="flex-1 relative">
                <div className="h-6 bg-gray-200 rounded-full overflow-hidden">
                  <div 
                    className="h-full bg-blue-500 transition-all duration-300"
                    style={{ width: `${barWidth}%` }}
                  />
                </div>
                
                {reviewCount > 0 && (
                  <div className="absolute inset-0 flex items-center justify-center text-xs font-medium text-white">
                    {reviewCount}ê°œ
                  </div>
                )}
              </div>
              
              <div className="w-16 text-sm text-right">
                {averageRating > 0 && (
                  <span className={`font-medium ${
                    averageRating >= 70 ? 'text-green-600' : 
                    averageRating >= 50 ? 'text-yellow-600' : 
                    'text-red-600'
                  }`}>
                    {averageRating.toFixed(0)}%
                  </span>
                )}
              </div>
            </div>
          );
        })}
      </div>
      
      {timeline.length === 0 && (
        <p className="text-gray-500 text-center py-8">
          í™œë™ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤
        </p>
      )}
    </div>
  );
};
```

## ì„œì¬ ê¸°ëŠ¥

### ì„œì¬ ìƒíƒœ ê´€ë¦¬
```typescript
const LibraryStatusManager: React.FC<{
  bookId: string;
  currentStatus?: string;
  onStatusChange: (status: string, metadata?: any) => Promise<void>;
}> = ({ bookId, currentStatus, onStatusChange }) => {
  const [isOpen, setIsOpen] = useState(false);
  const [selectedStatus, setSelectedStatus] = useState(currentStatus);
  const [metadata, setMetadata] = useState<any>({});
  const [isLoading, setIsLoading] = useState(false);
  
  const statusOptions = [
    { value: 'want_to_read', label: 'ì½ê³  ì‹¶ì€ ì±…', icon: BookmarkIcon, color: 'blue' },
    { value: 'reading', label: 'ì½ëŠ” ì¤‘', icon: ClockIcon, color: 'yellow' },
    { value: 'read', label: 'ì½ì€ ì±…', icon: CheckCircleIcon, color: 'green' },
  ];
  
  const handleStatusChange = async () => {
    if (!selectedStatus) return;
    
    setIsLoading(true);
    try {
      await onStatusChange(selectedStatus, metadata);
      setIsOpen(false);
      toast.success('ì„œì¬ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');
    } catch (error) {
      toast.error('ì„œì¬ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    } finally {
      setIsLoading(false);
    }
  };
  
  const currentOption = statusOptions.find(opt => opt.value === currentStatus);
  
  return (
    <>
      <button
        onClick={() => setIsOpen(true)}
        className={`flex items-center px-4 py-2 rounded-lg border transition-colors ${
          currentStatus
            ? `border-${currentOption?.color}-500 bg-${currentOption?.color}-50 text-${currentOption?.color}-700`
            : 'border-gray-300 hover:border-gray-400'
        }`}
      >
        {currentOption ? (
          <>
            <currentOption.icon className="w-5 h-5 mr-2" />
            {currentOption.label}
          </>
        ) : (
          <>
            <PlusIcon className="w-5 h-5 mr-2" />
            ì„œì¬ì— ì¶”ê°€
          </>
        )}
      </button>
      
      <Modal isOpen={isOpen} onClose={() => setIsOpen(false)}>
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">ì„œì¬ ìƒíƒœ ì„¤ì •</h3>
          
          <div className="space-y-2">
            {statusOptions.map(option => (
              <label key={option.value} className="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                <input
                  type="radio"
                  value={option.value}
                  checked={selectedStatus === option.value}
                  onChange={(e) => setSelectedStatus(e.target.value)}
                  className="sr-only"
                />
                <div className={`w-4 h-4 rounded-full border-2 ${
                  selectedStatus === option.value 
                    ? `border-${option.color}-500 bg-${option.color}-500`
                    : 'border-gray-300'
                }`}>
                  {selectedStatus === option.value && (
                    <div className="w-full h-full rounded-full bg-white scale-50" />
                  )}
                </div>
                
                <option.icon className={`w-5 h-5 text-${option.color}-600`} />
                <span className="font-medium">{option.label}</span>
              </label>
            ))}
          </div>
          
          {/* ë‚ ì§œ ì…ë ¥ (ìƒíƒœë³„) */}
          {selectedStatus === 'reading' && (
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ì½ê¸° ì‹œì‘ì¼
              </label>
              <input
                type="date"
                value={metadata.startDate || ''}
                onChange={(e) => setMetadata({ ...metadata, startDate: e.target.value })}
                className="w-full px-3 py-2 border border-gray-300 rounded-lg"
              />
            </div>
          )}
          
          {selectedStatus === 'read' && (
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ì½ê¸° ì™„ë£Œì¼
              </label>
              <input
                type="date"
                value={metadata.finishDate || ''}
                onChange={(e) => setMetadata({ ...metadata, finishDate: e.target.value })}
                className="w-full px-3 py-2 border border-gray-300 rounded-lg"
              />
            </div>
          )}
          
          {/* ê°œì¸ ë©”ëª¨ */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              ê°œì¸ ë©”ëª¨ (ì„ íƒì‚¬í•­)
            </label>
            <textarea
              value={metadata.notes || ''}
              onChange={(e) => setMetadata({ ...metadata, notes: e.target.value })}
              placeholder="ì´ ì±…ì— ëŒ€í•œ ê°œì¸ì ì¸ ë©”ëª¨ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”"
              className="w-full px-3 py-2 border border-gray-300 rounded-lg resize-none"
              rows={3}
            />
          </div>
          
          <div className="flex space-x-3 pt-4">
            <button
              onClick={() => setIsOpen(false)}
              className="flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"
            >
              ì·¨ì†Œ
            </button>
            <button
              onClick={handleStatusChange}
              disabled={!selectedStatus || isLoading}
              className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400"
            >
              {isLoading ? 'ì²˜ë¦¬ ì¤‘...' : 'ì €ì¥'}
            </button>
          </div>
        </div>
      </Modal>
    </>
  );
};
```

## ì™¸ë¶€ ë„ì„œ êµ¬ë§¤ ë§í¬

### ë„ì„œ êµ¬ë§¤ ë§í¬ ìƒì„±
```typescript
const generateBookPurchaseLinks = (book: BookDetail): ExternalLinks => {
  const baseUrls = {
    aladin: 'https://www.aladin.co.kr/search/wsearchresult.aspx?SearchTarget=All&SearchWord=',
    kyobo: 'http://www.kyobobook.co.kr/search/SearchCommonMain.jsp?vPstrKeyWord=',
    yes24: 'http://www.yes24.com/Product/Search?domain=ALL&query=',
    interpark: 'http://book.interpark.com/blog/bookPark/bookSearch.rdo?_method=initial&sc.shopNo=&sc.prdNo=&sc.saNo=&sc.mktNo=&sc.hrgnYn=&sc.q='
  };
  
  // ISBNì´ ìˆìœ¼ë©´ ISBNìœ¼ë¡œ, ì—†ìœ¼ë©´ ì œëª©+ì €ìë¡œ ê²€ìƒ‰
  const searchQuery = book.isbn 
    ? book.isbn
    : `${book.title} ${book.author}`;
    
  const encodedQuery = encodeURIComponent(searchQuery);
  
  return {
    aladin: `${baseUrls.aladin}${encodedQuery}`,
    kyobo: `${baseUrls.kyobo}${encodedQuery}`,
    yes24: `${baseUrls.yes24}${encodedQuery}`,
    interpark: `${baseUrls.interpark}${encodedQuery}`
  };
};

const ExternalBookLinks: React.FC<{
  book: BookDetail;
  onLinkClick: (platform: string) => void;
}> = ({ book, onLinkClick }) => {
  const links = generateBookPurchaseLinks(book);
  
  const platforms = [
    { key: 'aladin', name: 'ì•Œë¼ë”˜', color: 'blue', icon: 'ğŸ“š' },
    { key: 'kyobo', name: 'êµë³´ë¬¸ê³ ', color: 'green', icon: 'ğŸ“–' },
    { key: 'yes24', name: 'YES24', color: 'red', icon: 'ğŸ“•' },
    { key: 'interpark', name: 'ì¸í„°íŒŒí¬', color: 'purple', icon: 'ğŸ“—' },
  ];
  
  return (
    <div className="space-y-3">
      <h3 className="text-sm font-medium text-gray-700">ë„ì„œ êµ¬ë§¤í•˜ê¸°</h3>
      
      <div className="grid grid-cols-2 gap-2">
        {platforms.map(platform => (
          <a
            key={platform.key}
            href={links[platform.key as keyof ExternalLinks]}
            target="_blank"
            rel="noopener noreferrer"
            onClick={() => onLinkClick(platform.key)}
            className={`flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg border border-${platform.color}-200 text-${platform.color}-700 hover:bg-${platform.color}-50 transition-colors`}
          >
            <span className="mr-2">{platform.icon}</span>
            {platform.name}
          </a>
        ))}
      </div>
      
      <p className="text-xs text-gray-500">
        ì™¸ë¶€ ì‚¬ì´íŠ¸ë¡œ ì´ë™í•˜ì—¬ ë„ì„œë¥¼ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
      </p>
    </div>
  );
};
```

## SEO ìµœì í™”

### êµ¬ì¡°í™”ëœ ë°ì´í„° (JSON-LD)
```typescript
const BookStructuredData: React.FC<{
  book: BookDetail;
  stats: BookStats;
}> = ({ book, stats }) => {
  const structuredData = {
    "@context": "https://schema.org",
    "@type": "Book",
    name: book.title,
    author: {
      "@type": "Person",
      name: book.author
    },
    publisher: {
      "@type": "Organization", 
      name: book.publisher
    },
    datePublished: book.publishedDate,
    isbn: book.isbn,
    description: book.description,
    genre: book.genre,
    inLanguage: book.language,
    numberOfPages: book.pages,
    image: book.coverImage,
    aggregateRating: stats.reviewCount > 0 ? {
      "@type": "AggregateRating",
      ratingValue: stats.averageRating,
      ratingCount: stats.reviewCount,
      bestRating: 100,
      worstRating: 0
    } : undefined,
    review: stats.reviewCount > 0 ? {
      "@type": "Review",
      reviewCount: stats.reviewCount
    } : undefined
  };
  
  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{
        __html: JSON.stringify(structuredData)
      }}
    />
  );
};
```

## ì—ëŸ¬ ì²˜ë¦¬

### ë„ì„œ ì •ë³´ ë¡œë”© ì‹¤íŒ¨ ì²˜ë¦¬
```typescript
const BookNotFound: React.FC<{
  onSearchSimilar: () => void;
  onReportMissing: () => void;
}> = ({ onSearchSimilar, onReportMissing }) => {
  return (
    <div className="flex flex-col items-center justify-center min-h-96 space-y-6">
      <div className="text-center">
        <BookOpenIcon className="w-16 h-16 text-gray-400 mx-auto mb-4" />
        <h2 className="text-xl font-semibold text-gray-900 mb-2">
          ë„ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
        </h2>
        <p className="text-gray-600">
          ìš”ì²­í•˜ì‹  ë„ì„œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        </p>
      </div>
      
      <div className="flex space-x-4">
        <button
          onClick={onSearchSimilar}
          className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          ìœ ì‚¬í•œ ë„ì„œ ì°¾ê¸°
        </button>
        <button
          onClick={onReportMissing}
          className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"
        >
          ë„ì„œ ì¶”ê°€ ìš”ì²­
        </button>
      </div>
    </div>
  );
};
```

## ì ‘ê·¼ì„±

### ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
```typescript
// ë„ì„œ ì •ë³´ ARIA ë¼ë²¨ë§
<main role="main" aria-labelledby="book-title">
  <article className="book-detail">
    <header>
      <h1 id="book-title">{book.title}</h1>
      <p aria-label={`ì €ì: ${book.author}, ì¶œíŒì‚¬: ${book.publisher}`}>
        {book.author} Â· {book.publisher}
      </p>
    </header>
    
    <section aria-labelledby="book-description">
      <h2 id="book-description" className="sr-only">ë„ì„œ ì„¤ëª…</h2>
      <p>{book.description}</p>
    </section>
    
    <section aria-labelledby="book-stats">
      <h2 id="book-stats">ë„ì„œ í†µê³„</h2>
      <dl>
        <dt>ë…í›„ê° ìˆ˜</dt>
        <dd>{stats.reviewCount}ê°œ</dd>
        <dt>ì¶”ì²œë¥ </dt>
        <dd>{stats.averageRating}%</dd>
      </dl>
    </section>
    
    <section aria-labelledby="book-reviews">
      <h2 id="book-reviews">ë…í›„ê° ëª©ë¡</h2>
      <div role="list">
        {reviews.map(review => (
          <article key={review.id} role="listitem">
            {/* ë…í›„ê° ì¹´ë“œ */}
          </article>
        ))}
      </div>
    </section>
  </article>
</main>
```

## ì„±ëŠ¥ ëª©í‘œ

### Core Web Vitals
- **LCP**: < 2.5ì´ˆ (ë„ì„œ ì •ë³´ ë Œë”ë§)
- **FID**: < 100ms (íƒ­ ì „í™˜, í•„í„°ë§)
- **CLS**: < 0.1 (ë™ì  ì½˜í…ì¸  ë¡œë”© ì‹œ ë ˆì´ì•„ì›ƒ ì•ˆì •ì„±)

### ì‚¬ìš©ì ê²½í—˜ ì§€í‘œ
- ë„ì„œ ì •ë³´ ë¡œë”©: < 1.5ì´ˆ
- ë…í›„ê° ëª©ë¡ ë¡œë”©: < 2ì´ˆ
- í†µê³„ ì°¨íŠ¸ ë Œë”ë§: < 1ì´ˆ
- í•„í„°ë§/ì •ë ¬ ì‘ë‹µ: < 500ms